(this["webpackJsonp@react-page/examples"]=this["webpackJsonp@react-page/examples"]||[]).push([[16],{1087:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(12),i=n.n(a),l=n(257),c=n.n(l),u=!("undefined"===typeof window||!window.document||!window.document.createElement),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var f=function(e){function t(){return d(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentWillUnmount",value:function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}},{key:"render",value:function(){return u?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),i.a.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}]),t}(r.a.Component);f.propTypes={children:c.a.node.isRequired,node:c.a.any};var h=f,v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var m=function(e){function t(){return y(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),v(t,[{key:"componentDidMount",value:function(){this.renderPortal()}},{key:"componentDidUpdate",value:function(e){this.renderPortal()}},{key:"componentWillUnmount",value:function(){i.a.unmountComponentAtNode(this.defaultNode||this.props.node),this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null,this.portal=null}},{key:"renderPortal",value:function(e){this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode));var t=this.props.children;"function"===typeof this.props.children.type&&(t=r.a.cloneElement(this.props.children)),this.portal=i.a.unstable_renderSubtreeIntoContainer(this,t,this.props.node||this.defaultNode)}},{key:"render",value:function(){return null}}]),t}(r.a.Component),O=m;m.propTypes={children:c.a.node.isRequired,node:c.a.any};var w=i.a.createPortal?h:O,g=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var k=27,E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.portalNode=null,n.state={active:!!e.defaultOpen},n.openPortal=n.openPortal.bind(n),n.closePortal=n.closePortal.bind(n),n.wrapWithPortal=n.wrapWithPortal.bind(n),n.handleOutsideMouseClick=n.handleOutsideMouseClick.bind(n),n.handleKeydown=n.handleKeydown.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),g(t,[{key:"componentDidMount",value:function(){this.props.closeOnEsc&&document.addEventListener("keydown",this.handleKeydown),this.props.closeOnOutsideClick&&document.addEventListener("click",this.handleOutsideMouseClick)}},{key:"componentWillUnmount",value:function(){this.props.closeOnEsc&&document.removeEventListener("keydown",this.handleKeydown),this.props.closeOnOutsideClick&&document.removeEventListener("click",this.handleOutsideMouseClick)}},{key:"openPortal",value:function(e){this.state.active||(e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation(),this.setState({active:!0},this.props.onOpen))}},{key:"closePortal",value:function(){this.state.active&&this.setState({active:!1},this.props.onClose)}},{key:"wrapWithPortal",value:function(e){var t=this;return this.state.active?r.a.createElement(w,{node:this.props.node,key:"react-portal",ref:function(e){return t.portalNode=e}},e):null}},{key:"handleOutsideMouseClick",value:function(e){if(this.state.active){var t=this.portalNode.props.node||this.portalNode.defaultNode;!t||t.contains(e.target)||e.button&&0!==e.button||this.closePortal()}}},{key:"handleKeydown",value:function(e){e.keyCode===k&&this.state.active&&this.closePortal()}},{key:"render",value:function(){return this.props.children({openPortal:this.openPortal,closePortal:this.closePortal,portal:this.wrapWithPortal,isOpen:this.state.active})}}]),t}(r.a.Component);E.propTypes={children:c.a.func.isRequired,defaultOpen:c.a.bool,node:c.a.any,openByClickOn:c.a.element,closeOnEsc:c.a.bool,closeOnOutsideClick:c.a.bool,onOpen:c.a.func,onClose:c.a.func},E.defaultProps={onOpen:function(){},onClose:function(){}};var j=n(16),C=n(1),P=function(){var e=Object(j.e)();try{return Boolean(e.selection)&&""!==C.a.string(e,e.selection)}catch(t){return!1}},_=n(453);t.default=function(e){var t=e.plugins,n=e.translations,a=P(),i=Object(o.useRef)(),l=Object(j.e)();return Object(o.useEffect)((function(){var e=i.current;if(a){var t=window.getSelection();try{var n=t.getRangeAt(0).getBoundingClientRect();if(n){var o=n.left,r=n.top,l=n.width;e.style.opacity="1",e.style.top=r+window.scrollY-e.offsetHeight+"px",e.style.left=o+window.scrollX-e.offsetWidth/2+l/2+"px"}}catch(c){}}}),[l,a]),r.a.createElement(w,null,r.a.createElement("div",{className:"react-page-plugins-content-slate-inline-toolbar "+(a?"":"react-page-plugins-content-slate-inline-toolbar--hidden"),style:{padding:0},ref:i},t&&t.map((function(e,t){return e.addHoverButton?r.a.createElement(_.a,{translations:n,key:t,plugin:e}):null}))))}},141:function(e,t,n){"use strict";var o=n(397),r=n.n(o),a=n(455),i=function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},l=new r.a({allErrors:!0,useDefaults:!0});t.a=function(e){var t=i({type:"object"},e);return new a.a(t,function(e){var t=l.compile(e);return function(e){var n;if(t(e),t.errors&&t.errors.length)return(null===(n=t.errors)||void 0===n?void 0:n.length)?{details:t.errors}:null}}(t))}},453:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(1),i=n(16),l=n(91),c=n(47),u=function(e,t){var n=Object(c.b)(e,t);if(n){var o=n[0];return"component"===t.pluginType&&"mark"===t.object?o[t.type]:o.data}return t.getInitialData?t.getInitialData():{}},s=n(49),d=n(1095),p=n(1029),f=n(1030),h=n(206),v=n(621),y=n(353),b=n.n(y),m=n(566),O=n.n(m),w=n(141),g=n(464),k=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},E=g.AutoForm,j=g.AutoFields;var C=function(e){var t=e.schema?Object(w.a)(e.schema):null,n=Boolean(e.schema),a=Object(o.useRef)(),i=k(Object(o.useState)(null),2),l=i[0],c=i[1],u=Object(o.useCallback)((function(t){e.close(),e.shouldInsertWithText?e.add({text:l,data:t}):e.add({data:t})}),[e.shouldInsertWithText,l]),s=Object(o.useCallback)((function(){a.current&&a.current.submit()}),[a.current]),y=Object(o.useCallback)((function(){t?s():u({})}),[s,u,n]);return r.a.createElement(d.a,{disableEnforceFocus:!0,PaperProps:{style:{minWidth:300}},open:e.open},r.a.createElement(p.a,null,e.shouldInsertWithText?r.a.createElement("div",null,r.a.createElement(v.a,{autoFocus:!0,placeholder:"Text",onChange:function(e){return c(e.target.value)},value:l})):null,n?r.a.createElement(E,{ref:a,model:e.data,schema:t,onSubmit:u},r.a.createElement(j,null)):null),r.a.createElement(f.a,null,r.a.createElement(h.a,{variant:"text",onClick:function(){e.close()},style:{marginRight:"auto"}},e.cancelLabel||"Cancel"),e.isActive?r.a.createElement(h.a,{variant:"contained",color:"secondary",onClick:function(){e.remove(),e.close()}},e.removeLabel||"Remove",r.a.createElement(b.a,{style:{marginLeft:10}})):null,r.a.createElement(h.a,{variant:"contained",color:"primary",onClick:y},e.submitLabel||"Ok",r.a.createElement(O.a,{style:{marginLeft:10}}))))},P=n(51),_=function(e){var t=e.condition,n=e.wrapper,o=e.children;return t?n(o):o},N=Object(P.a)((function(){return Promise.resolve().then(n.bind(null,200))})),T=Object(P.a)((function(){return n.e(17).then(n.bind(null,1094))})),x=o.memo((function(e){var t=e.icon,n=e.isActive,r=e.onClick,a=e.disabled,i=void 0!==a&&a,l=e.toolTip,c=void 0===l?"":l;return o.createElement(_,{condition:!i,wrapper:function(e){return o.createElement(T,{title:c},e)}},o.createElement(N,{onMouseDown:r,style:n?{color:"rgb(0, 188, 212)"}:i?{color:"gray"}:{color:"white"},disabled:i},t))})),S=function(){return(S=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},R=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i};t.a=r.a.memo((function(e){var t,n,d,p,f,h=e.plugin,v=Boolean(h.Controls)||Boolean(h.schema),y=R(Object(o.useState)(!1),2),b=y[0],m=y[1],O=Object(o.useRef)(),w="component"===h.pluginType&&"inline"===h.object&&(!(null===(t=null===O||void 0===O?void 0:O.current)||void 0===t?void 0:t.selection)||a.e.isCollapsed(null===(n=null===O||void 0===O?void 0:O.current)||void 0===n?void 0:n.selection))&&!(null===(d=null===O||void 0===O?void 0:O.current)||void 0===d?void 0:d.isActive),g=Object(o.useCallback)((function(){return m(!1)}),[]),k=function(e){var t=Object(c.a)(e);return Boolean(t)}(h),E=Object(l.b)(h),j=Object(s.a)(h),P=Object(i.e)(),_=r.a.useCallback((function(e){e.preventDefault(),v||w?(b||(O.current={selection:P.selection,isActive:k,data:u(P,h)}),m(!b)):k?j():E()}),[k,v,b,w]),N=h.Controls||C,T=function(e){try{var t=Object(i.e)();return!t||!!e.isDisabled&&e.isDisabled(t)}catch(n){return!1}}(h);return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{onClick:_,disabled:T,isActive:k,icon:h.icon||"component"===h.pluginType&&h.deserialize.tagName,toolTip:h.label}),v||w?r.a.createElement(N,S({schema:h.schema,close:g,open:b,add:function(e){var t;(null===(t=null===O||void 0===O?void 0:O.current)||void 0===t?void 0:t.selection)&&a.g.select(P,null===O||void 0===O?void 0:O.current.selection),E(e)},remove:function(){var e;(null===(e=null===O||void 0===O?void 0:O.current)||void 0===e?void 0:e.selection)&&a.g.select(P,null===O||void 0===O?void 0:O.current.selection),j()},isActive:null===(p=null===O||void 0===O?void 0:O.current)||void 0===p?void 0:p.isActive,shouldInsertWithText:w,data:null===(f=null===O||void 0===O?void 0:O.current)||void 0===f?void 0:f.data},e)):null)}))}}]);
//# sourceMappingURL=16.82546f39.chunk.js.map