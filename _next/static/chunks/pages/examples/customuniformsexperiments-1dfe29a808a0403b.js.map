{"version":3,"file":"static/chunks/pages/examples/customuniformsexperiments-1dfe29a808a0403b.js","mappings":"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","sources":["webpack://_N_E/?eb7f","webpack://_N_E/./pages/examples/customuniformsexperiments.tsx","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/screen.js","webpack://_N_E/../packages/editor/lib-es/ui/AutoformControls/index.js","webpack://_N_E/../packages/editor/lib-es/ui/AutoformControls/makeUniformsSchema.js","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/examples/customuniformsexperiments\",\n      function () {\n        return require(\"private-next-pages/examples/customuniformsexperiments.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/examples/customuniformsexperiments\"])\n      });\n    }\n  ","/* eslint-disable react/no-unescaped-entities */\nimport React, { useState } from 'react';\nimport { AutoFields, ColorPickerField } from '@react-page/editor';\n// The editor core\nimport type { Value, CellPlugin } from '@react-page/editor';\nimport Editor, { createValue } from '@react-page/editor';\n\nimport slate from '@react-page/plugins-slate';\n\nimport PageLayout from '../../components/PageLayout';\nimport { Button } from '@mui/material';\n\nconst customContentPluginWithSpecialForm: CellPlugin<{\n  title: string;\n  description: string;\n}> = {\n  Renderer: ({ data }) => (\n    <div>\n      <h3>Name</h3>\n      <p>title: {data.title}</p>\n      <p>description: {data.description}</p>\n    </div>\n  ),\n  id: 'custom-content-plugin-with-custom-actions',\n  title: 'Custom content plugin',\n  description: 'Some custom content plugin with special actions',\n  version: 1,\n  controls: {\n    type: 'autoform',\n    schema: {\n      properties: {\n        title: { type: 'string' },\n        description: { type: 'string' },\n      },\n      required: [],\n    },\n    Content: ({ nodeId, onChange, remove }) => (\n      <div>\n        <p>node {nodeId}</p>\n\n        <Button\n          variant=\"outlined\"\n          onClick={() => {\n            onChange(\n              {\n                title: 'Good day, sir',\n              },\n              {\n                lang: 'en',\n              }\n            );\n          }}\n        >\n          set title in English to \"Good day, sir\"\n        </Button>\n        <Button\n          variant=\"outlined\"\n          onClick={() => {\n            onChange(\n              {\n                title: 'Guten Tag',\n              },\n              {\n                lang: 'de',\n              }\n            );\n          }}\n        >\n          set title in German to \"Guten Tag\"\n        </Button>\n        <AutoFields />\n\n        <Button variant=\"outlined\" onClick={remove} color=\"error\">\n          Remove this cell\n        </Button>\n      </div>\n    ),\n  },\n};\n\nconst cellPlugins = [slate(), customContentPluginWithSpecialForm];\n\nconst INITIAL_VALUE = createValue(\n  {\n    rows: [\n      [\n        {\n          plugin: customContentPluginWithSpecialForm,\n        },\n      ],\n    ],\n  },\n  {\n    cellPlugins,\n    lang: 'default',\n  }\n);\nexport default function CustomFormLayout() {\n  const [value, setValue] = useState<Value>(INITIAL_VALUE);\n\n  return (\n    <PageLayout>\n      <Editor\n        cellPlugins={cellPlugins}\n        value={value}\n        onChange={setValue}\n        languages={[\n          {\n            label: 'English',\n            lang: 'en',\n          },\n          {\n            label: 'Deutsch',\n            lang: 'de',\n          },\n        ]}\n      />\n    </PageLayout>\n  );\n}\n","import { useMediaQuery, useTheme } from '@mui/material';\nexport var useIsSmallScreen = function () {\n    var theme = useTheme();\n    return useMediaQuery(theme.breakpoints.down('sm'));\n};\n//# sourceMappingURL=screen.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { Fragment, useEffect, useMemo } from 'react';\nimport { useIsSmallScreen } from '../../core/components/hooks';\nimport lazyLoad from '../../core/helper/lazyLoad';\nimport makeUniformsSchema from './makeUniformsSchema';\nexport var AutoForm = lazyLoad(function () { return import('./AutoForm'); });\nexport var AutoField = lazyLoad(function () { return import('./AutoField'); });\nexport var AutoFields = lazyLoad(function () { return import('./AutoFields'); });\nvar getDefaultValue = function (bridge) {\n    return bridge.getSubfields().reduce(function (acc, fieldName) {\n        var _a;\n        return (__assign(__assign({}, acc), (_a = {}, _a[fieldName] = bridge.getInitialValue(fieldName), _a)));\n    }, {});\n};\nexport function AutoformControls(props) {\n    var onChange = props.onChange, data = props.data, schema = props.schema, _a = props.columnCount, columnCount = _a === void 0 ? 2 : _a, Content = props.Content;\n    var bridge = useMemo(function () { return makeUniformsSchema(schema); }, [schema]);\n    useEffect(function () {\n        var newDefaultData = __assign(__assign({}, getDefaultValue(bridge)), (data !== null && data !== void 0 ? data : {}));\n        onChange(newDefaultData);\n    }, [bridge]);\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(AutoForm\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    , { \n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        model: data, autosave: true, schema: bridge, onSubmit: onChange }, Content ? (React.createElement(Content, __assign({}, props, { columnCount: columnCount }))) : (React.createElement(\"div\", { style: {\n            columnCount: isSmall ? 1 : columnCount,\n            columnRule: '1px solid #E0E0E0',\n            columnGap: 48,\n        } },\n        React.createElement(AutoFields, { element: Fragment })))));\n}\n//# sourceMappingURL=index.js.map","/* eslint-disable @typescript-eslint/ban-types */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport Ajv from 'ajv';\nimport { JSONSchemaBridge } from 'uniforms-bridge-json-schema';\nvar ajv = new Ajv({ allErrors: true, useDefaults: true });\najv.addKeyword('uniforms');\nfunction createValidator(schema) {\n    var validator = ajv.compile(schema);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function (model) {\n        var _a;\n        validator(model);\n        if (validator.errors && validator.errors.length) {\n            return ((_a = validator.errors) === null || _a === void 0 ? void 0 : _a.length) ? { details: validator.errors } : null;\n        }\n    };\n}\nfunction makeUniformsSchema(jsonSchema) {\n    var fullSchema = __assign({ type: 'object' }, jsonSchema);\n    var bridge = new JSONSchemaBridge(fullSchema, createValidator(fullSchema));\n    // see https://github.com/react-page/react-page/issues/1187\n    // we remap props.component to props._customComponent to avoid the underlying issue in uniforms\n    //\n    var getPropsOrg = bridge.getProps;\n    bridge.getProps = function (name) {\n        var _a = getPropsOrg.call(this, name), component = _a.component, props = __rest(_a, [\"component\"]);\n        if (component) {\n            return __assign({ _customComponent: component }, props);\n        }\n        return props;\n    };\n    return bridge;\n}\nexport default makeUniformsSchema;\n//# sourceMappingURL=makeUniformsSchema.js.map"],"names":["window","__NEXT_P","push","__webpack_require__","customContentPluginWithSpecialForm","Renderer","data","param","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","jsx","h3","p","title","description","id","version","controls","type","schema","properties","required","Content","nodeId","onChange","remove","Button","variant","onClick","lang","AutoFields","color","cellPlugins","slate","INITIAL_VALUE","createValue","rows","plugin","CustomFormLayout","value","setValue","useState","PageLayout","Editor","languages","label","useIsSmallScreen","theme","_mui_material__WEBPACK_IMPORTED_MODULE_0__","Z","_mui_material__WEBPACK_IMPORTED_MODULE_1__","breakpoints","down","__assign","Object","assign","t","s","i","n","arguments","length","prototype","hasOwnProperty","call","apply","AutoForm","_core_helper_lazyLoad__WEBPACK_IMPORTED_MODULE_1__","Promise","all","e","then","bind","AutoformControls","props","_a","columnCount","bridge","react__WEBPACK_IMPORTED_MODULE_0__","useMemo","_makeUniformsSchema__WEBPACK_IMPORTED_MODULE_2__","useEffect","getSubfields","reduce","acc","fieldName","getInitialValue","isSmall","_core_components_hooks__WEBPACK_IMPORTED_MODULE_3__","D","createElement","model","autosave","onSubmit","style","columnRule","columnGap","element","Fragment","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","ajv","ajv__WEBPACK_IMPORTED_MODULE_0__","ZP","allErrors","useDefaults","addKeyword","__webpack_exports__","jsonSchema","validator","fullSchema","uniforms_bridge_json_schema__WEBPACK_IMPORTED_MODULE_1__","j","compile","errors","details","getPropsOrg","getProps","name","component","_customComponent"],"sourceRoot":""}