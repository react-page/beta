(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8275,92],{31320:function(e,t,r){"use strict";function n(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function o(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function a(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return o(r.overflowY,t)||o(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function i(e,t,r,n,o,a,i,s){return a<e&&i>t||a>e&&i<t?0:a<=e&&s<=r||i>=t&&s>=r?a-e-n:i>t&&s<r||a<e&&s>r?i-t+o:0}function s(e,t){var r=window,o=t.scrollMode,s=t.block,l=t.inline,d=t.boundary,c=t.skipOverflowHiddenElements,u="function"==typeof d?d:function(e){return e!==d};if(!n(e))throw new TypeError("Invalid target");for(var f=document.scrollingElement||document.documentElement,v=[],p=e;n(p)&&u(p);){if((p=p.parentElement)===f){v.push(p);break}null!=p&&p===document.body&&a(p)&&!a(document.documentElement)||null!=p&&a(p,c)&&v.push(p)}for(var h=r.visualViewport?r.visualViewport.width:innerWidth,g=r.visualViewport?r.visualViewport.height:innerHeight,m=window.scrollX||pageXOffset,w=window.scrollY||pageYOffset,E=e.getBoundingClientRect(),b=E.height,y=E.width,C=E.top,k=E.right,x=E.bottom,D=E.left,O="start"===s||"nearest"===s?C:"end"===s?x:C+b/2,S="center"===l?D+y/2:"end"===l?k:D,P=[],R=0;R<v.length;R++){var T=v[R],M=T.getBoundingClientRect(),F=M.height,N=M.width,B=M.top,j=M.right,L=M.bottom,A=M.left;if("if-needed"===o&&C>=0&&D>=0&&x<=g&&k<=h&&C>=B&&x<=L&&D>=A&&k<=j)return P;var W=getComputedStyle(T),I=parseInt(W.borderLeftWidth,10),U=parseInt(W.borderTopWidth,10),z=parseInt(W.borderRightWidth,10),_=parseInt(W.borderBottomWidth,10),V=0,q=0,K="offsetWidth"in T?T.offsetWidth-T.clientWidth-I-z:0,H="offsetHeight"in T?T.offsetHeight-T.clientHeight-U-_:0;if(f===T)V="start"===s?O:"end"===s?O-g:"nearest"===s?i(w,w+g,g,U,_,w+O,w+O+b,b):O-g/2,q="start"===l?S:"center"===l?S-h/2:"end"===l?S-h:i(m,m+h,h,I,z,m+S,m+S+y,y),V=Math.max(0,V+w),q=Math.max(0,q+m);else{V="start"===s?O-B-U:"end"===s?O-L+_+H:"nearest"===s?i(B,L,F,U,_+H,O,O+b,b):O-(B+F/2)+H/2,q="start"===l?S-A-I:"center"===l?S-(A+N/2)+K/2:"end"===l?S-j+z+K:i(A,j,N,I,z+K,S,S+y,y);var J=T.scrollLeft,X=T.scrollTop;O+=X-(V=Math.max(0,Math.min(X+V,T.scrollHeight-F+H))),S+=J-(q=Math.max(0,Math.min(J+q,T.scrollWidth-N+K)))}P.push({el:T,top:V,left:q})}return P}r.d(t,{Z:function(){return s}})},61242:function(e){"use strict";e.exports=function(e){if(e=String(e||""),n.test(e))return"rtl";if(o.test(e))return"ltr";return"neutral"};var t="\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc",r="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff",n=new RegExp("^[^"+r+"]*["+t+"]"),o=new RegExp("^[^"+t+"]*["+r+"]")},66471:function(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,a;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!==o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!==o--;)if(!Object.prototype.hasOwnProperty.call(r,a[o]))return!1;for(o=n;0!==o--;){var i=a[o];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}},28907:function(e,t,r){"use strict";function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(e){return!!e&&!!e[K]}function a(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===H}(e)||Array.isArray(e)||!!e[q]||!!e.constructor[q]||f(e)||v(e))}function i(e,t,r){void 0===r&&(r=!1),0===s(e)?(r?Object.keys:J)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function s(e){var t=e[K];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:f(e)?2:v(e)?3:0}function l(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){return 2===s(e)?e.get(t):e[t]}function c(e,t,r){var n=s(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){return U&&e instanceof Map}function v(e){return z&&e instanceof Set}function p(e){return e.o||e.t}function h(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=X(e);delete t[K];for(var r=J(t),n=0;n<r.length;n++){var o=r[n],a=t[o];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),w(e)||o(e)||!a(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&i(e,(function(e,t){return g(t,!0)}),!0)),e}function m(){n(2)}function w(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function E(e){var t=$[e];return t||n(18,e),t}function b(){return W}function y(e,t){t&&(E("Patches"),e.u=[],e.s=[],e.v=t)}function C(e){k(e),e.p.forEach(D),e.p=null}function k(e){e===W&&(W=e.l)}function x(e){return W={p:[],l:W,h:e,m:!0,_:0}}function D(e){var t=e[K];0===t.i||1===t.i?t.j():t.O=!0}function O(e,t){t._=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.g||E("ES5").S(t,e,o),o?(r[K].P&&(C(t),n(4)),a(e)&&(e=S(t,e),t.l||R(t,e)),t.u&&E("Patches").M(r[K],e,t.u,t.s)):e=S(t,r,[]),C(t),t.u&&t.v(t.u,t.s),e!==V?e:void 0}function S(e,t,r){if(w(t))return t;var n=t[K];if(!n)return i(t,(function(o,a){return P(e,n,t,o,a,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return R(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=h(n.k):n.o;i(3===n.i?new Set(o):o,(function(t,a){return P(e,n,o,t,a,r)})),R(e,o,!1),r&&e.u&&E("Patches").R(n,r,e.u,e.s)}return n.o}function P(e,t,r,n,i,s){if(o(i)){var d=S(e,i,s&&t&&3!==t.i&&!l(t.D,n)?s.concat(n):void 0);if(c(r,n,d),!o(d))return;e.m=!1}if(a(i)&&!w(i)){if(!e.h.F&&e._<1)return;S(e,i),t&&t.A.l||R(e,i)}}function R(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&g(t,r)}function T(e,t){var r=e[K];return(r?p(r):e)[t]}function M(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function F(e){e.P||(e.P=!0,e.l&&F(e.l))}function N(e){e.o||(e.o=h(e.t))}function B(e,t,r){var n=f(t)?E("MapSet").N(t,r):v(t)?E("MapSet").T(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:b(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=n,a=Y;r&&(o=[n],a=Z);var i=Proxy.revocable(o,a),s=i.revoke,l=i.proxy;return n.k=l,n.j=s,l}(t,r):E("ES5").J(t,r);return(r?r.A:b()).p.push(n),n}function j(e){return o(e)||n(22,e),function e(t){if(!a(t))return t;var r,n=t[K],o=s(t);if(n){if(!n.P&&(n.i<4||!E("ES5").K(n)))return n.t;n.I=!0,r=L(t,o),n.I=!1}else r=L(t,o);return i(r,(function(t,o){n&&d(n.t,t)===o||c(r,t,e(o))})),3===o?new Set(r):r}(e)}function L(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return h(e)}r.d(t,{P2:function(){return te},_x:function(){return re},mv:function(){return o},Uy:function(){return ee}});var A,W,I="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),U="undefined"!=typeof Map,z="undefined"!=typeof Set,_="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,V=I?Symbol.for("immer-nothing"):((A={})["immer-nothing"]=!0,A),q=I?Symbol.for("immer-draftable"):"__$immer_draftable",K=I?Symbol.for("immer-state"):"__$immer_state",H=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),J="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,X=Object.getOwnPropertyDescriptors||function(e){var t={};return J(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},$={},Y={get:function(e,t){if(t===K)return e;var r=p(e);if(!l(r,t))return function(e,t,r){var n,o=M(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!a(n)?n:n===T(e.t,t)?(N(e),e.o[t]=B(e.A.h,n,e)):n},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,r){var n=M(p(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=T(p(e),t),a=null==o?void 0:o[K];if(a&&a.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(u(r,o)&&(void 0!==r||l(e.t,t)))return!0;N(e),F(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==T(e.t,t)||t in e.t?(e.D[t]=!1,N(e),F(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=p(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n(12)}},Z={};i(Y,(function(e,t){Z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Z.deleteProperty=function(e,t){return Y.deleteProperty.call(this,e[0],t)},Z.set=function(e,t,r){return Y.set.call(this,e[0],t,r,e[0])};var Q=function(){function e(e){var t=this;this.g=_,this.F=!0,this.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var i=r;r=e;var s=t;return function(e){var t=this;void 0===e&&(e=i);for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return s.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(o))}))}}var l;if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),a(e)){var d=x(t),c=B(t,e,void 0),u=!0;try{l=r(c),u=!1}finally{u?C(d):k(d)}return"undefined"!=typeof Promise&&l instanceof Promise?l.then((function(e){return y(d,o),O(e,d)}),(function(e){throw C(d),e})):(y(d,o),O(l,d))}if(!e||"object"!=typeof e){if((l=r(e))===V)return;return void 0===l&&(l=e),t.F&&g(l,!0),l}n(21,e)},this.produceWithPatches=function(e,r){return"function"==typeof e?function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(o))}))}:[t.produce(e,r,(function(e,t){n=e,o=t})),n,o];var n,o},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){a(e)||n(8),o(e)&&(e=j(e));var t=x(this),r=B(this,e,void 0);return r[K].C=!0,k(t),r},t.finishDraft=function(e,t){var r=(e&&e[K]).A;return y(r,t),O(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!_&&n(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var a=E("Patches").$;return o(e)?a(e,t):this.produce(e,(function(e){return a(e,t.slice(r+1))}))},e}(),G=new Q,ee=G.produce,te=(G.produceWithPatches.bind(G),G.setAutoFreeze.bind(G),G.setUseProxies.bind(G),G.applyPatches.bind(G),G.createDraft.bind(G)),re=G.finishDraft.bind(G)},71236:function(e,t){"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},o={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},a={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)a["f"+i]=111+i;function s(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return l(e,t)})),o=function(e){return n.some((function(t){return d(t,e)}))};return null==r?o:o(r)}function l(e,t){var r=t&&t.byKey,o={},a=(e=e.replace("++","+add")).split("+"),i=a.length;for(var s in n)o[n[s]]=!1;var l=!0,d=!1,f=void 0;try{for(var v,p=a[Symbol.iterator]();!(l=(v=p.next()).done);l=!0){var h=v.value,g=h.endsWith("?")&&h.length>1;g&&(h=h.slice(0,-1));var m=u(h),w=n[m];1!==i&&w||(r?o.key=m:o.which=c(h)),w&&(o[w]=!g||null)}}catch(E){d=!0,f=E}finally{try{!l&&p.return&&p.return()}finally{if(d)throw f}}return o}function d(e,t){for(var r in e){var n=e[r],o=void 0;if(null!=n&&((null!=(o="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&o!==n))return!1}return!0}function c(e){return e=u(e),a[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=o[e]||e}t.ZP=s,t.TB=function(e,t){return s(e,{byKey:!0},t)}},96539:function(e,t,r){var n=r(77400).Symbol;e.exports=n},99736:function(e,t,r){var n=r(96539),o=r(34840),a=r(21258),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},74833:function(e,t,r){var n=r(56127),o=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(o,""):e}},39120:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},34840:function(e,t,r){var n=r(96539),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(l){}var o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}},21258:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},77400:function(e,t,r){var n=r(39120),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},56127:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},66726:function(e,t,r){var n=r(11611),o=r(82846),a=r(91936),i=Math.max,s=Math.min;e.exports=function(e,t,r){var l,d,c,u,f,v,p=0,h=!1,g=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function w(t){var r=l,n=d;return l=d=void 0,p=t,u=e.apply(n,r)}function E(e){return p=e,f=setTimeout(y,t),h?w(e):u}function b(e){var r=e-v;return void 0===v||r>=t||r<0||g&&e-p>=c}function y(){var e=o();if(b(e))return C(e);f=setTimeout(y,function(e){var r=t-(e-v);return g?s(r,c-(e-p)):r}(e))}function C(e){return f=void 0,m&&l?w(e):(l=d=void 0,u)}function k(){var e=o(),r=b(e);if(l=arguments,d=this,v=e,r){if(void 0===f)return E(v);if(g)return clearTimeout(f),f=setTimeout(y,t),w(v)}return void 0===f&&(f=setTimeout(y,t)),u}return t=a(t)||0,n(r)&&(h=!!r.leading,c=(g="maxWait"in r)?i(a(r.maxWait)||0,t):c,m="trailing"in r?!!r.trailing:m),k.cancel=function(){void 0!==f&&clearTimeout(f),p=0,l=v=d=f=void 0},k.flush=function(){return void 0===f?u:C(o())},k}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},92360:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},55193:function(e,t,r){var n=r(99736),o=r(92360);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},82846:function(e,t,r){var n=r(77400);e.exports=function(){return n.Date.now()}},19783:function(e,t,r){var n=r(66726),o=r(11611);e.exports=function(e,t,r){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(r)&&(a="leading"in r?!!r.leading:a,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:a,maxWait:t,trailing:i})}},91936:function(e,t,r){var n=r(74833),o=r(11611),a=r(55193),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=s.test(e);return r||l.test(e)?d(e.slice(2),r?2:8):i.test(e)?NaN:+e}},78895:function(e,t,r){"use strict";r.d(t,{CX:function(){return Ct},F3:function(){return rt},mH:function(){return mt},UE:function(){return pt},vt:function(){return ge},ui:function(){return Oe},_7:function(){return pe},BU:function(){return bt}});var n=r(27378),o=r(85912),a=r(61242),i=r.n(a),s=r(66726),l=r.n(s),d=r(19783),c=r.n(d),u=r(31320);function f(e){return e===Object(e)&&0!==Object.keys(e).length}var v=function(e,t){var r=!e.ownerDocument.documentElement.contains(e);if(f(t)&&"function"===typeof t.behavior)return t.behavior(r?[]:(0,u.Z)(e,t));if(!r){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:f(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,o=e.top,a=e.left;n.scroll&&r?n.scroll({top:o,left:a,behavior:t}):(n.scrollTop=o,n.scrollLeft=a)}))}((0,u.Z)(e,n),n.behavior)}},p=r(71236),h=r(31542);function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var w=parseInt(n.version.split(".")[0],10)>=17,E="undefined"!==typeof navigator&&"undefined"!==typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,b="undefined"!==typeof navigator&&/Mac OS X/.test(navigator.userAgent),y="undefined"!==typeof navigator&&/Android/.test(navigator.userAgent),C="undefined"!==typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),k="undefined"!==typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),x="undefined"!==typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),D="undefined"!==typeof navigator&&/Chrome/i.test(navigator.userAgent),O="undefined"!==typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),S="undefined"!==typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),P="undefined"!==typeof navigator&&/.*QQBrowser/.test(navigator.userAgent),R="undefined"!==typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),T="undefined"!==typeof navigator&&/.*Wechat/.test(navigator.userAgent),M=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),F=!O&&!x&&"undefined"!==typeof globalThis&&globalThis.InputEvent&&"function"===typeof globalThis.InputEvent.prototype.getTargetRanges,N=M?n.useLayoutEffect:n.useEffect,B=e=>{var{isLast:t,leaf:r,parent:a,text:i}=e,s=pe(),l=rt.findPath(s,i),d=o.Path.parent(l);return s.isVoid(a)?n.createElement(L,{length:o.Node.string(a).length}):""!==r.text||a.children[a.children.length-1]!==i||s.isInline(a)||""!==o.Editor.string(s,d)?""===r.text?n.createElement(L,null):t&&"\n"===r.text.slice(-1)?n.createElement(j,{isTrailing:!0,text:r.text}):n.createElement(j,{text:r.text}):n.createElement(L,{isLineBreak:!0})},j=e=>{var{text:t,isTrailing:r=!1}=e,o=(0,n.useRef)(null),a=()=>"".concat(null!==t&&void 0!==t?t:"").concat(r?"\n":"");return N((()=>{var e=a();o.current&&o.current.textContent!==e&&(o.current.textContent=e)})),o.current?n.createElement("span",{"data-slate-string":!0,ref:o}):n.createElement("span",{"data-slate-string":!0,ref:o},a())},L=e=>{var{length:t=0,isLineBreak:r=!1}=e;return n.createElement("span",{"data-slate-zero-width":r?"n":"z","data-slate-length":t},"\ufeff",r?n.createElement("br",null):null)},A=new WeakMap,W=new WeakMap,I=new WeakMap,U=new WeakMap,z=new WeakMap,_=new WeakMap,V=new WeakMap,q=new WeakMap,K=new WeakMap,H=new WeakMap,J=new WeakMap,X=new WeakMap,$=new WeakMap,Y=new WeakMap,Z=new WeakMap,Q=new WeakMap,G=Symbol("placeholder"),ee=e=>{var{leaf:t,isLast:r,text:o,parent:a,renderPlaceholder:i,renderLeaf:s=(e=>n.createElement(re,Object.assign({},e)))}=e,l=(0,n.useRef)(null);(0,n.useEffect)((()=>{var e=null===l||void 0===l?void 0:l.current,t=document.querySelector('[data-slate-editor="true"]');if(e&&t)return t.style.minHeight="".concat(e.clientHeight,"px"),()=>{t.style.minHeight="auto"}}),[l,t]);var d=n.createElement(B,{isLast:r,leaf:t,parent:a,text:o});if(t[G]){var c={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:l}};d=n.createElement(n.Fragment,null,i(c),d)}return s({attributes:{"data-slate-leaf":!0},children:d,leaf:t,text:o})},te=n.memo(ee,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&o.Text.equals(t.leaf,e.leaf)&&t.leaf[G]===e.leaf[G])),re=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},ne=["anchor","focus"],oe=["anchor","focus"],ae=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((r=>t.hasOwnProperty(r)&&e[r]===t[r])),ie=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r],i=m(n,ne),s=m(a,oe);if(!o.Range.equals(n,a)||n[G]!==a[G]||!ae(i,s))return!1}return!0};function se(e){var t=(0,n.useRef)(0),r=(0,n.useRef)(null),[,o]=(0,n.useState)(0);return(0,n.useEffect)((()=>(Q.set(e,(()=>{r.current||(r.current=requestAnimationFrame((()=>{o((e=>e+1)),r.current=null})),t.current++)})),()=>{Q.delete(e)})),[e]),r.current&&(cancelAnimationFrame(r.current),r.current=null),t.current}var le=e=>{for(var{decorations:t,isLast:r,parent:a,renderPlaceholder:i,renderLeaf:s,text:l}=e,d=pe(),c=(0,n.useRef)(null),u=o.Text.decorations(l,t),f=rt.findKey(d,l),v=[],p=0;p<u.length;p++){var h=u[p];v.push(n.createElement(te,{isLast:r&&p===u.length-1,key:"".concat(f.id,"-").concat(p),renderPlaceholder:i,leaf:h,text:l,parent:a,renderLeaf:s}))}N((()=>{var e=q.get(d);c.current?(null===e||void 0===e||e.set(f,c.current),_.set(l,c.current),z.set(c.current,l)):(null===e||void 0===e||e.delete(f),_.delete(l))}));var g=y?se(l):void 0;return n.createElement("span",{"data-slate-node":"text",ref:c,key:g},v)},de=n.memo(le,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&ie(t.decorations,e.decorations))),ce=e=>{var{decorations:t,element:r,renderElement:a=(e=>n.createElement(fe,Object.assign({},e))),renderPlaceholder:s,renderLeaf:l,selection:d}=e,c=(0,n.useRef)(null),u=pe(),f=xe(),v=u.isInline(r),p=rt.findKey(u,r),h=me({decorations:t,node:r,renderElement:a,renderPlaceholder:s,renderLeaf:l,selection:d}),g={"data-slate-node":"element",ref:c};if(v&&(g["data-slate-inline"]=!0),!v&&o.Editor.hasInlines(u,r)){var m=o.Node.string(r),w=i()(m);"rtl"===w&&(g.dir=w)}if(o.Editor.isVoid(u,r)){g["data-slate-void"]=!0,!f&&v&&(g.contentEditable=!1);var E=v?"span":"div",[[b]]=o.Node.texts(r);h=n.createElement(E,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},n.createElement(de,{renderPlaceholder:s,decorations:[],isLast:!1,parent:r,text:b})),A.set(b,0),W.set(b,r)}N((()=>{var e=q.get(u);c.current?(null===e||void 0===e||e.set(p,c.current),_.set(r,c.current),z.set(c.current,r)):(null===e||void 0===e||e.delete(p),_.delete(r))}));var C=a({attributes:g,children:h,element:r});if(y){var k=se(r);return n.createElement(n.Fragment,{key:k},C)}return C},ue=n.memo(ce,((e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&ie(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&o.Range.equals(e.selection,t.selection)))),fe=e=>{var{attributes:t,children:r,element:o}=e,a=pe().isInline(o)?"span":"div";return n.createElement(a,Object.assign({},t,{style:{position:"relative"}}),r)},ve=(0,n.createContext)(null),pe=()=>{var e=(0,n.useContext)(ve);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},he=(0,n.createContext)(!1),ge=()=>(0,n.useContext)(he),me=e=>{for(var{decorations:t,node:r,renderElement:a,renderPlaceholder:i,renderLeaf:s,selection:l}=e,d=pe(),c=rt.findPath(d,r),u=[],f=o.Element.isElement(r)&&!d.isInline(r)&&o.Editor.hasInlines(d,r),v=function(e){var v=c.concat(e),p=r.children[e],h=rt.findKey(d,p),g=o.Editor.range(d,v),m=l&&o.Range.intersection(g,l),w=t.reduce(((e,t)=>{var r=o.Range.intersection(t,g);return r&&e.push(r),e}),[]);o.Element.isElement(p)?u.push(n.createElement(he.Provider,{key:"provider-".concat(h.id),value:!!m},n.createElement(ue,{decorations:w,element:p,key:h.id,renderElement:a,renderPlaceholder:i,renderLeaf:s,selection:m}))):u.push(n.createElement(de,{decorations:w,key:h.id,isLast:f&&e===r.children.length-1,parent:r,renderPlaceholder:i,renderLeaf:s,text:p})),A.set(p,e),W.set(p,r)},p=0;p<r.children.length;p++)v(p);return u},we={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Ee={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},be={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},ye=e=>{var t=we[e],r=Ee[e],n=be[e],o=t&&(0,p.TB)(t),a=r&&(0,p.TB)(r),i=n&&(0,p.TB)(n);return e=>!(!o||!o(e))||(!!(b&&a&&a(e))||!(b||!i||!i(e)))},Ce={isBold:ye("bold"),isCompose:ye("compose"),isMoveBackward:ye("moveBackward"),isMoveForward:ye("moveForward"),isDeleteBackward:ye("deleteBackward"),isDeleteForward:ye("deleteForward"),isDeleteLineBackward:ye("deleteLineBackward"),isDeleteLineForward:ye("deleteLineForward"),isDeleteWordBackward:ye("deleteWordBackward"),isDeleteWordForward:ye("deleteWordForward"),isExtendBackward:ye("extendBackward"),isExtendForward:ye("extendForward"),isExtendLineBackward:ye("extendLineBackward"),isExtendLineForward:ye("extendLineForward"),isItalic:ye("italic"),isMoveLineBackward:ye("moveLineBackward"),isMoveLineForward:ye("moveLineForward"),isMoveWordBackward:ye("moveWordBackward"),isMoveWordForward:ye("moveWordForward"),isRedo:ye("redo"),isSoftBreak:ye("insertSoftBreak"),isSplitBlock:ye("splitBlock"),isTransposeCharacter:ye("transposeCharacter"),isUndo:ye("undo")},ke=(0,n.createContext)(!1),xe=()=>(0,n.useContext)(ke),De=(0,n.createContext)(null),Oe=()=>{var e=(0,n.useContext)(De);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var[t]=e;return t},Se=(0,n.createContext)((()=>[])),Pe=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,Re=e=>Te(e)&&1===e.nodeType,Te=e=>{var t=Pe(e);return!!t&&e instanceof t.Node},Me=e=>{var t=e&&e.anchorNode&&Pe(e.anchorNode);return!!t&&e instanceof t.Selection},Fe=e=>Te(e)&&3===e.nodeType,Ne=(e,t,r)=>{for(var n,{childNodes:o}=e,a=o[t],i=t,s=!1,l=!1;(Te(n=a)&&8===n.nodeType||Re(a)&&0===a.childNodes.length||Re(a)&&"false"===a.getAttribute("contenteditable"))&&(!s||!l);)i>=o.length?(s=!0,i=t-1,r="backward"):i<0?(l=!0,i=t+1,r="forward"):(a=o[i],t=i,i+="forward"===r?1:-1);return[a,t]},Be=(e,t,r)=>{var[n]=Ne(e,t,r);return n},je=e=>{var t="";if(Fe(e)&&e.nodeValue)return e.nodeValue;if(Re(e)){for(var r of Array.from(e.childNodes))t+=je(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},Le=/data-slate-fragment="(.+?)"/m,Ae=e=>{var t=e.getData("text/html"),[,r]=t.match(Le)||[];return r},We=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"];function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ze=e=>n.createElement(n.Fragment,null,me(e)),_e=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},Ve=()=>[],qe=(e,t)=>{if(!e.selection||e.selection&&o.Range.isCollapsed(e.selection)){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),v(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},Ke=(e,t)=>Te(t)&&rt.hasDOMNode(e,t),He=(e,t)=>Te(t)&&rt.hasDOMNode(e,t,{editable:!0}),Je=(e,t)=>{if(K.get(e))return!1;var r=Ke(e,t)&&rt.toSlateNode(e,t);return o.Editor.isVoid(e,r)},Xe=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},$e=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented};function Ye(e,t){if(e===t)return null;var r=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return e.length!==t.length?r:null}(e,t);if(null===r)return null;var n=function(e,t,r){for(var n=e.length,o=t.length,a=Math.min(n,o,r),i=0;i<a;i++)if(e.charAt(n-i-1)!==t.charAt(o-i-1))return i;return e.length!==t.length?a:null}(e,t,Math.min(e.length-r,t.length-r));return null===n?null:{start:r,end:n}}function Ze(e,t){return e.slice(t.start,e.length-t.end)}function Qe(e,t){var r=rt.toSlateNode(e,t);if(o.Text.isText(r)){var n=r.text,a=t.textContent;if(a.endsWith("\n")&&(a=a.slice(0,a.length-1)),a!==n){var i=function(e,t){if(void 0===e||void 0===t)return null;var r=Ye(e,t);if(null==r)return null;var n=Ze(t,r),o=Ze(e,r);return{start:r.start,end:e.length-r.end,insertText:n,removeText:o}}(n,a);if(null!==i)return{text:i,path:rt.findPath(e,r)}}}}function Ge(e,t,r){var{path:n,text:a}=r,i={anchor:{path:n,offset:a.start},focus:{path:n,offset:a.end}};if(!t||!o.Range.isCollapsed(t))return i;var{insertText:s,removeText:l}=a;if((1===s.length||1===l.length)&&o.Path.equals(t.anchor.path,n)){var[d]=Array.from(o.Editor.nodes(e,{at:t,match:o.Text.isText}));if(d){var[c]=d,{anchor:u}=t,f=c.text[u.offset-1],v=c.text[u.offset];if(1===s.length&&s===v)return t;if(1===l.length&&l===f)return{anchor:{path:n,offset:u.offset-1},focus:{path:n,offset:u.offset}}}}return i}var et=0;class tt{constructor(){this.id="".concat(et++)}}var rt={isComposing:e=>!!J.get(e),getWindow(e){var t=I.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},findKey(e,t){var r=V.get(t);return r||(r=new tt,V.set(t,r)),r},findPath(e,t){for(var r=[],n=t;;){var a=W.get(n);if(null==a){if(o.Editor.isEditor(n))return r;break}var i=A.get(n);if(null==i)break;r.unshift(i),n=a}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(t)))},findDocumentOrShadowRoot(e){var t=rt.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},isFocused:e=>!!H.get(e),isReadOnly:e=>!!K.get(e),blur(e){var t=rt.toDOMNode(e,e),r=rt.findDocumentOrShadowRoot(e);H.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=rt.toDOMNode(e,e),r=rt.findDocumentOrShadowRoot(e);H.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){rt.toDOMNode(e,e);var{selection:t}=e,r=rt.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&o.Transforms.deselect(e)},hasDOMNode(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:o=!1}=n,a=rt.toDOMNode(e,e);try{r=Re(t)?t:t.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return!!r&&(r.closest("[data-slate-editor]")===a&&(!(o&&!r.isContentEditable)||("boolean"===typeof r.isContentEditable&&r.closest('[contenteditable="false"]')===a||!!r.getAttribute("data-slate-zero-width"))))},insertData(e,t){e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),setFragmentData(e,t,r){e.setFragmentData(t,r)},toDOMNode(e,t){var r=q.get(e),n=o.Editor.isEditor(t)?U.get(e):null===r||void 0===r?void 0:r.get(rt.findKey(e,t));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(t)));return n},toDOMPoint(e,t){var r,[n]=o.Editor.node(e,t.path),a=rt.toDOMNode(e,n);o.Editor.void(e,{at:t})&&(t={path:t.path,offset:0});var i=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),s=0;for(var l of i){var d=l.childNodes[0];if(null!=d&&null!=d.textContent){var{length:c}=d.textContent,u=l.getAttribute("data-slate-length"),f=s+(null==u?c:parseInt(u,10));if(t.offset<=f){r=[d,Math.min(c,Math.max(0,t.offset-s))];break}s=f}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(t)));return r},toDOMRange(e,t){var{anchor:r,focus:n}=t,a=o.Range.isBackward(t),i=rt.toDOMPoint(e,r),s=o.Range.isCollapsed(t)?i:rt.toDOMPoint(e,n),l=rt.getWindow(e).document.createRange(),[d,c]=a?s:i,[u,f]=a?i:s,v=!!(Re(d)?d:d.parentElement).getAttribute("data-slate-zero-width"),p=!!(Re(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return l.setStart(d,v?1:c),l.setEnd(u,p?1:f),l},toSlateNode(e,t){var r=Re(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?z.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:a}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i,s=rt.toSlateNode(e,t.target),l=rt.findPath(e,s);if(o.Editor.isVoid(e,s)){var d=a.getBoundingClientRect(),c=e.isInline(s)?r-d.left<d.left+d.width-r:n-d.top<d.top+d.height-n,u=o.Editor.point(e,l,{edge:c?"start":"end"}),f=c?o.Editor.before(e,u):o.Editor.after(e,u);if(f)return o.Editor.range(e,f)}var{document:v}=rt.getWindow(e);if(v.caretRangeFromPoint)i=v.caretRangeFromPoint(r,n);else{var p=v.caretPositionFromPoint(r,n);p&&((i=v.createRange()).setStart(p.offsetNode,p.offset),i.setEnd(p.offsetNode,p.offset))}if(!i)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return rt.toSlateRange(e,i,{exactMatch:!1,suppressThrow:!1})},toSlatePoint(e,t,r){var{exactMatch:n,suppressThrow:o}=r,[a,i]=n?t:(e=>{var[t,r]=e;if(Re(t)&&t.childNodes.length){var n=r===t.childNodes.length,o=n?r-1:r;for([t,o]=Ne(t,o,n?"backward":"forward"),n=o<r;Re(t)&&t.childNodes.length;){var a=n?t.childNodes.length-1:0;t=Be(t,a,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),s=a.parentNode,l=null,d=0;if(s){var c,u=rt.toDOMNode(e,e),f=s.closest('[data-slate-void="true"]'),v=f&&u.contains(f)?f:null,p=s.closest("[data-slate-leaf]"),h=null;if(p){if(l=p.closest('[data-slate-node="text"]')){var g=rt.getWindow(e).document.createRange();g.setStart(l,0),g.setEnd(a,i);var m=g.cloneContents();[...Array.prototype.slice.call(m.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(m.querySelectorAll("[contenteditable=false]"))].forEach((e=>{e.parentNode.removeChild(e)})),d=m.textContent.length,h=l}}else v&&((p=v.querySelector("[data-slate-leaf]"))?(l=p.closest('[data-slate-node="text"]'),d=(h=p).textContent.length,h.querySelectorAll("[data-slate-zero-width]").forEach((e=>{d-=e.textContent.length}))):d=1);h&&d===h.textContent.length&&(s.hasAttribute("data-slate-zero-width")||C&&null!==(c=h.textContent)&&void 0!==c&&c.endsWith("\n\n"))&&d--}if(!l){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var w=rt.toSlateNode(e,l);return{path:rt.findPath(e,w),offset:d}},toSlateRange(e,t,r){var n,a,i,s,l,{exactMatch:d,suppressThrow:c}=r;if((Me(t)?t.anchorNode:t.startContainer)&&(Me(t)?(n=t.anchorNode,a=t.anchorOffset,i=t.focusNode,s=t.focusOffset,l=D&&window.document.activeElement&&window.document.activeElement.shadowRoot?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(n=t.startContainer,a=t.startOffset,i=t.endContainer,s=t.endOffset,l=t.collapsed)),null==n||null==i||null==a||null==s)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));var u=rt.toSlatePoint(e,[n,a],{exactMatch:d,suppressThrow:c});if(!u)return null;var f=l?u:rt.toSlatePoint(e,[i,s],{exactMatch:d,suppressThrow:c});if(!f)return null;var v={anchor:u,focus:f};return o.Range.isExpanded(v)&&o.Range.isForward(v)&&Re(i)&&o.Editor.void(e,{at:v.focus,mode:"highest"})&&(v=o.Editor.unhangRange(e,v,{voids:!0})),v},hasRange(e,t){var{anchor:r,focus:n}=t;return o.Editor.hasPath(e,r.path)&&o.Editor.hasPath(e,n.path)}};class nt{constructor(e,t){this.editor=e,this.restoreDOM=t,this.flush=e=>{try{this.reconcileMutations(e)}catch(t){console.error(t),this.restoreDOM()}},this.reconcileMutations=e=>{var t=function(e,t){var r=[],n=[],a=[],i=[];return t.forEach((t=>{switch(t.type){case"childList":t.addedNodes.length&&t.addedNodes.forEach((e=>{r.push(e)})),t.removedNodes.forEach((e=>{n.push(e)}));break;case"characterData":i.push(t);var{parentNode:s}=t.target;if(!s)return;var l=Qe(e,s);if(!l)return;if(a.some((e=>{var{path:t}=e;return o.Path.equals(t,l.path)})))return;a.push(l)}})),{addedNodes:r,removedNodes:n,insertedText:a,characterDataMutations:i}}(this.editor,e),{insertedText:r,removedNodes:n}=t;if(((e,t)=>{var{selection:r}=e,{removedNodes:n}=t;return!!r&&o.Range.isExpanded(r)&&n.length>0})(this.editor,t)){var a=function(e){return e.reduce(((e,t)=>{var{text:r}=t;return"".concat(e).concat(r.insertText)}),"")}(r);this.replaceExpandedSelection(a)}else((e,t)=>{var{addedNodes:r}=t,{selection:n}=e,a=n?o.Node.parent(e,n.anchor.path):null,i=a?rt.toDOMNode(e,a):null;return!!i&&r.some((e=>e instanceof HTMLElement&&e.tagName===(null===i||void 0===i?void 0:i.tagName)))})(this.editor,t)?this.insertBreak():((e,t)=>{var{addedNodes:r,characterDataMutations:n,removedNodes:o}=t;return o.length>0&&0===r.length&&n.length>0})(this.editor,t)?this.removeLeafNodes(n):((e,t)=>{var{removedNodes:r}=t;return r.length>0})(this.editor,t)?this.deleteBackward():((e,t)=>{var{insertedText:r}=t;return r.length>0})(this.editor,t)&&this.insertText(r)},this.insertText=e=>{var{selection:t}=this.editor;if(rt.isComposing(this.editor)||X.get(this.editor))return Y.set(this.editor,e),void X.set(this.editor,!1);e.forEach((e=>{var r=e.text.insertText,n=Ge(this.editor,t,e);o.Transforms.setSelection(this.editor,n),o.Editor.insertText(this.editor,r)}))},this.insertBreak=()=>{var{selection:e}=this.editor;o.Editor.insertBreak(this.editor),this.restoreDOM(),e&&setTimeout((()=>{this.editor.selection&&o.Range.equals(e,this.editor.selection)&&o.Transforms.move(this.editor)}),100)},this.replaceExpandedSelection=e=>{o.Editor.deleteFragment(this.editor),e.length&&o.Editor.insertText(this.editor,e),this.restoreDOM()},this.deleteBackward=()=>{o.Editor.deleteBackward(this.editor),rt.focus(this.editor),this.restoreDOM()},this.removeLeafNodes=e=>{for(var t of e){var r=rt.toSlateNode(this.editor,t);if(r){var n=rt.findPath(this.editor,r);o.Transforms.delete(this.editor,{at:n}),this.restoreDOM()}}},this.editor=e,this.restoreDOM=t}}function ot(e,t,r){var[o]=(0,n.useState)((()=>new MutationObserver(t)));N((()=>{o.disconnect()})),(0,n.useEffect)((()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return o.observe(e.current,r),o.disconnect.bind(o)}))}var at={childList:!0,characterData:!0,subtree:!0};function it(e){var t,r=Re(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r&&z.get(r);return n||(null!==(t=r)&&void 0!==t&&t.parentElement?it(r.parentElement):null)}function st(e,t){var r=pe(),a=(0,n.useRef)(new Set);ot(e,(0,n.useCallback)((e=>{t.current&&e.forEach((e=>{var{target:t}=e,r=it(t);if(r)return a.current.add(r)}))}),[]),at),a.current.clear();var i=(0,n.useCallback)((()=>{var e=Array.from(a.current.values()),t=e.filter((t=>!e.some((e=>o.Path.isParent(rt.findPath(r,e),rt.findPath(r,t))))));t.forEach((e=>{var t;null===(t=Q.get(e))||void 0===t||t()})),a.current.clear()}),[]);return i}var lt={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};function dt(e){var t=pe(),{receivedUserInput:r,onUserInput:o}=function(){var e=pe(),t=(0,n.useRef)(!1),r=(0,n.useRef)(null),o=(0,n.useCallback)((()=>{if(!1===t.current){var n=rt.getWindow(e);t.current=!0,r.current&&n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame((()=>{t.current=!1,r.current=null}))}}),[]);return(0,n.useEffect)((()=>{t.current&&(t.current=!1)})),{receivedUserInput:t,onUserInput:o}}(),a=st(e,r),i=(0,n.useMemo)((()=>new nt(t,a)),[a,t]),s=(0,n.useRef)(null),l=(0,n.useRef)(!1);return ot(e,(0,n.useCallback)((e=>{r.current&&(l.current=!0,i.flush(e),s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{l.current=!1,s.current=null}),250))}),[]),lt),{isReconciling:l,onUserInput:o}}var ct=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","style","as"];function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vt=(0,n.createContext)(!1),pt=()=>(0,n.useContext)(vt);var ht=(0,n.createContext)({});var gt=["editor","children","onChange","value"],mt=e=>{var{editor:t,children:r,onChange:a,value:i}=e,s=m(e,gt),l=(0,n.useRef)(!1),[d,c]=n.useState((()=>{if(!o.Node.isNodeList(i))throw new Error("[Slate] value is invalid! Expected a list of elements"+"but got: ".concat(JSON.stringify(i)));if(!o.Editor.isEditor(t))throw new Error("[Slate] editor is invalid! you passed:"+"".concat(JSON.stringify(t)));return t.children=i,Object.assign(t,s),[t]})),{selectorContext:u,onChange:f}=function(e){var t=(0,n.useRef)([]).current,r=(0,n.useRef)({editor:e}).current,o=(0,n.useCallback)((e=>{r.editor=e,t.forEach((t=>t(e)))}),[]);return{selectorContext:(0,n.useMemo)((()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})})),[t,r]),onChange:o}}(t),v=(0,n.useCallback)((()=>{a&&a(t.children),c([t]),f(t)}),[a]);Z.set(t,v),(0,n.useEffect)((()=>()=>{Z.set(t,(()=>{})),l.current=!0}),[]);var[p,h]=(0,n.useState)(rt.isFocused(t));return(0,n.useEffect)((()=>{h(rt.isFocused(t))})),N((()=>{var e=()=>h(rt.isFocused(t));return w?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})}),[]),n.createElement(ht.Provider,{value:u},n.createElement(De.Provider,{value:d},n.createElement(ve.Provider,{value:t},n.createElement(vt.Provider,{value:p},r))))},wt=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},Et=(e,t,r)=>{var n=rt.toDOMRange(e,t).getBoundingClientRect(),o=rt.toDOMRange(e,r).getBoundingClientRect();return wt(n,o)&&wt(o,n)},bt=e=>{var t=e,{apply:r,onChange:n,deleteBackward:a}=t;return q.set(t,new WeakMap),t.deleteBackward=r=>{if("line"!==r)return a(r);if(e.selection&&o.Range.isCollapsed(e.selection)){var n=o.Editor.above(e,{match:t=>o.Editor.isBlock(e,t),at:e.selection});if(n){var[,i]=n,s=o.Editor.range(e,i,e.selection.anchor),l=((e,t)=>{var r=o.Editor.range(e,o.Range.end(t)),n=Array.from(o.Editor.positions(e,{at:t})),a=0,i=n.length,s=Math.floor(i/2);if(Et(e,o.Editor.range(e,n[a]),r))return o.Editor.range(e,n[a],r);if(n.length<2)return o.Editor.range(e,n[n.length-1],r);for(;s!==n.length&&s!==a;)Et(e,o.Editor.range(e,n[s]),r)?i=s:a=s,s=Math.floor((a+i)/2);return o.Editor.range(e,n[i],r)})(t,s);o.Range.isCollapsed(l)||o.Transforms.delete(e,{at:l})}}},t.apply=n=>{var a=[];switch(n.type){case"insert_text":case"remove_text":case"set_node":case"split_node":a.push(...yt(t,n.path));break;case"set_selection":var i;null===(i=$.get(e))||void 0===i||i.unref(),$.delete(e);break;case"insert_node":case"remove_node":a.push(...yt(t,o.Path.parent(n.path)));break;case"merge_node":var s=o.Path.previous(n.path);a.push(...yt(t,s));break;case"move_node":var l=o.Path.common(o.Path.parent(n.path),o.Path.parent(n.newPath));a.push(...yt(t,l))}for(var[d,c]of(r(n),a)){var[u]=o.Editor.node(t,d);V.set(u,c)}},t.setFragmentData=e=>{var{selection:r}=t;if(r){var[n,a]=o.Range.edges(r),i=o.Editor.void(t,{at:n.path}),s=o.Editor.void(t,{at:a.path});if(!o.Range.isCollapsed(r)||i){var l=rt.toDOMRange(t,r),d=l.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach((e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)})),s){var[u]=s,f=l.cloneRange(),v=rt.toDOMNode(t,u);f.setEndAfter(v),d=f.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach((e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),Fe(c)){var p=c.ownerDocument.createElement("span");p.style.whiteSpace="pre",p.appendChild(c),d.appendChild(p),c=p}var h=t.getFragment(),g=JSON.stringify(h),m=window.btoa(encodeURIComponent(g));c.setAttribute("data-slate-fragment",m),e.setData("application/x-slate-fragment",m);var w=d.ownerDocument.createElement("div");return w.appendChild(d),w.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(w),e.setData("text/html",w.innerHTML),e.setData("text/plain",je(w)),d.ownerDocument.body.removeChild(w),e}}},t.insertData=e=>{t.insertFragmentData(e)||t.insertTextData(e)},t.insertFragmentData=e=>{var r=e.getData("application/x-slate-fragment")||Ae(e);if(r){var n=decodeURIComponent(window.atob(r)),o=JSON.parse(n);return t.insertFragment(o),!0}return!1},t.insertTextData=e=>{var r=e.getData("text/plain");if(r){var n=r.split(/\r\n|\r|\n/),a=!1;for(var i of n)a&&o.Transforms.splitNodes(t,{always:!0}),t.insertText(i),a=!0;return!0}return!1},t.onChange=()=>{h.unstable_batchedUpdates((()=>{var e=Z.get(t);e&&e(),n()}))},t},yt=(e,t)=>{var r=[];for(var[n,a]of o.Editor.levels(e,{at:t})){var i=rt.findKey(e,n);r.push([a,i])}return r},Ct=y?e=>{var{autoFocus:t,decorate:r=Ve,onDOMBeforeInput:a,placeholder:i,readOnly:s=!1,renderElement:d,renderLeaf:u,renderPlaceholder:f=(e=>n.createElement(_e,Object.assign({},e))),style:p={},as:h="div"}=e,g=m(e,ct),w=Oe(),[E,b]=(0,n.useState)(!1),y=(0,n.useRef)(null),C=dt(y);K.set(w,s);var k=(0,n.useMemo)((()=>({isComposing:!1,isUpdatingSelection:!1,latestElement:null})),[]),x=se(w);N((()=>{var e;y.current&&(e=Pe(y.current))?(I.set(w,e),U.set(w,y.current),_.set(w,y.current),z.set(y.current,w)):_.delete(w);try{var{selection:t}=w,r=rt.findDocumentOrShadowRoot(w).getSelection();if(k.isComposing||!r||!rt.isFocused(w))return;var n="None"!==r.type;if(!t&&!n)return;var a=U.get(w),i=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(i=!0),n&&i&&t){var s=rt.toSlateRange(w,r,{exactMatch:!0,suppressThrow:!0});if(s&&o.Range.equals(s,t))return}if(t&&!rt.hasRange(w,t))return void(w.selection=rt.toSlateRange(w,r,{exactMatch:!1,suppressThrow:!1}));var l=rt.toDOMNode(w,w);k.isUpdatingSelection=!0;var d=t&&rt.toDOMRange(w,t);if(d){o.Range.isBackward(t)?r.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):r.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset);var c=d.startContainer.parentElement;c.getBoundingClientRect=d.getBoundingClientRect.bind(d),v(c,{scrollMode:"if-needed",boundary:l}),delete c.getBoundingClientRect}else r.removeAllRanges();setTimeout((()=>{k.isUpdatingSelection=!1}))}catch(u){k.isUpdatingSelection=!1}})),(0,n.useEffect)((()=>{y.current&&t&&y.current.focus()}),[t]);var D=(0,n.useCallback)(c()((()=>{try{if(!k.isComposing&&!k.isUpdatingSelection&&!C.isReconciling.current){var e=rt.findDocumentOrShadowRoot(w),{activeElement:t}=e,r=rt.toDOMNode(w,w),n=e.getSelection();if(t===r?(k.latestElement=t,H.set(w,!0)):H.delete(w),!n)return o.Transforms.deselect(w);var{anchorNode:a,focusNode:i}=n,s=He(w,a)||Je(w,a),l=He(w,i)||Je(w,i);if(s&&l){var d=rt.toSlateRange(w,n,{exactMatch:!1,suppressThrow:!1});o.Transforms.select(w,d)}else o.Transforms.deselect(w)}}catch(c){}}),100),[s]),O=(0,n.useMemo)((()=>l()(D,0)),[D]),S=(0,n.useCallback)((e=>{s||!He(w,e.target)||$e(e,a)||(O.flush(),C.onUserInput())}),[s,a]);N((()=>{var e=y.current;return null===e||void 0===e||e.addEventListener("beforeinput",S),()=>null===e||void 0===e?void 0:e.removeEventListener("beforeinput",S)}),[x,a]),N((()=>{var e=rt.getWindow(w);return e.document.addEventListener("selectionchange",O),()=>{e.document.removeEventListener("selectionchange",O)}}),[O]);var P=r([w,[]]);if(i&&1===w.children.length&&1===Array.from(o.Node.texts(w)).length&&""===o.Node.string(w)&&!E){var R=o.Editor.start(w,[]);P.push({[G]:!0,placeholder:i,anchor:R,focus:R})}return n.createElement(ke.Provider,{value:s},n.createElement(Se.Provider,{value:r},n.createElement(h,Object.assign({key:x,role:s?void 0:"textbox"},g,{spellCheck:g.spellCheck,autoCorrect:g.autoCorrect,autoCapitalize:g.autoCapitalize,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s||void 0,suppressContentEditableWarning:!0,ref:y,style:ft({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},p),onCopy:(0,n.useCallback)((e=>{He(w,e.target)&&!Xe(e,g.onCopy)&&(e.preventDefault(),rt.setFragmentData(w,e.clipboardData,"copy"))}),[g.onCopy]),onCut:(0,n.useCallback)((e=>{if(!s&&He(w,e.target)&&!Xe(e,g.onCut)){e.preventDefault(),rt.setFragmentData(w,e.clipboardData,"cut");var{selection:t}=w;if(t)if(o.Range.isExpanded(t))o.Editor.deleteFragment(w);else{var r=o.Node.parent(w,t.anchor.path);o.Editor.isVoid(w,r)&&o.Transforms.delete(w)}}}),[s,g.onCut]),onFocus:(0,n.useCallback)((e=>{if(!s&&!k.isUpdatingSelection&&He(w,e.target)&&!Xe(e,g.onFocus)){var t=rt.findDocumentOrShadowRoot(w);k.latestElement=t.activeElement,H.set(w,!0)}}),[s,g.onFocus]),onBlur:(0,n.useCallback)((e=>{if(!s&&!k.isUpdatingSelection&&He(w,e.target)&&!Xe(e,g.onBlur)){var t=rt.findDocumentOrShadowRoot(w);if(k.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(r!==rt.toDOMNode(w,w)&&(!Re(r)||!r.hasAttribute("data-slate-spacer"))){if(null!=r&&Te(r)&&rt.hasDOMNode(w,r)){var n=rt.toSlateNode(w,r);if(o.Element.isElement(n)&&!w.isVoid(n))return}H.delete(w)}}}}),[s,g.onBlur]),onClick:(0,n.useCallback)((e=>{if(!s&&Ke(w,e.target)&&!Xe(e,g.onClick)&&Te(e.target)){var t=rt.toSlateNode(w,e.target),r=rt.findPath(w,t);if(o.Editor.hasPath(w,r))if(o.Node.get(w,r)===t){var n=o.Editor.start(w,r),a=o.Editor.end(w,r),i=o.Editor.void(w,{at:n}),l=o.Editor.void(w,{at:a});if(i&&l&&o.Path.equals(i[1],l[1])){var d=o.Editor.range(w,n);o.Transforms.select(w,d)}}}}),[s,g.onClick]),onCompositionEnd:(0,n.useCallback)((e=>{He(w,e.target)&&!Xe(e,g.onCompositionEnd)&&(O.flush(),setTimeout((()=>{k.isComposing&&b(!1),k.isComposing=!1,J.set(w,!1),X.set(w,!0);var e=Y.get(w)||[];if(e.length){Y.set(w,[]);var{selection:t}=w;e.forEach((e=>{var r=e.text.insertText,n=Ge(w,t,e);o.Transforms.setSelection(w,n),o.Editor.insertText(w,r)}))}}),20))}),[g.onCompositionEnd]),onCompositionUpdate:(0,n.useCallback)((e=>{He(w,e.target)&&!Xe(e,g.onCompositionUpdate)&&(!k.isComposing&&b(!0),k.isComposing=!0,J.set(w,!0))}),[g.onCompositionUpdate]),onCompositionStart:(0,n.useCallback)((e=>{He(w,e.target)&&!Xe(e,g.onCompositionStart)&&(!k.isComposing&&b(!0),k.isComposing=!0,J.set(w,!0))}),[g.onCompositionStart]),onPaste:(0,n.useCallback)((e=>{e.clipboardData=(e=>{if(!e.getData("application/x-slate-fragment")){var t=Ae(e);if(t){var r=new DataTransfer;return e.types.forEach((t=>{r.setData(t,e.getData(t))})),r.setData("application/x-slate-fragment",t),r}}return e})(e.clipboardData),!He(w,e.target)||Xe(e,g.onPaste)||s||(e.preventDefault(),rt.insertData(w,e.clipboardData))}),[s,g.onPaste])}),me({decorations:P,node:w,renderElement:d,renderPlaceholder:f,renderLeaf:u,selection:w.selection}))))}:e=>{var{autoFocus:t,decorate:r=Ve,onDOMBeforeInput:a,placeholder:s,readOnly:d=!1,renderElement:u,renderLeaf:f,renderPlaceholder:v=(e=>n.createElement(_e,Object.assign({},e))),scrollSelectionIntoView:p=qe,style:h={},as:g="div"}=e,w=m(e,We),b=Oe(),[y,x]=(0,n.useState)(!1),O=(0,n.useRef)(null),B=(0,n.useRef)([]);K.set(b,d);var j=(0,n.useMemo)((()=>({hasInsertPrefixInCompositon:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null})),[]);N((()=>{var e;O.current&&(e=Pe(O.current))?(I.set(b,e),U.set(b,O.current),_.set(b,O.current),z.set(O.current,b)):_.delete(b);var{selection:t}=b,r=rt.findDocumentOrShadowRoot(b).getSelection();if(!rt.isComposing(b)&&r&&rt.isFocused(b)){var n="None"!==r.type;if(t||n){var a=U.get(b),i=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(i=!0),n&&i&&t){var s=rt.toSlateRange(b,r,{exactMatch:!0,suppressThrow:!0});if(s&&o.Range.equals(s,t))return}if(!t||rt.hasRange(b,t)){j.isUpdatingSelection=!0;var l=t&&rt.toDOMRange(b,t);l?(o.Range.isBackward(t)?r.setBaseAndExtent(l.endContainer,l.endOffset,l.startContainer,l.startOffset):r.setBaseAndExtent(l.startContainer,l.startOffset,l.endContainer,l.endOffset),p(b,l)):r.removeAllRanges(),setTimeout((()=>{l&&C&&rt.toDOMNode(b,b).focus();j.isUpdatingSelection=!1}))}else b.selection=rt.toSlateRange(b,r,{exactMatch:!1,suppressThrow:!1})}}})),(0,n.useEffect)((()=>{O.current&&t&&O.current.focus()}),[t]);var L=(0,n.useCallback)(c()((()=>{if(!rt.isComposing(b)&&!j.isUpdatingSelection&&!j.isDraggingInternally){var e=rt.findDocumentOrShadowRoot(b),{activeElement:t}=e,r=rt.toDOMNode(b,b),n=e.getSelection();if(t===r?(j.latestElement=t,H.set(b,!0)):H.delete(b),!n)return o.Transforms.deselect(b);var{anchorNode:a,focusNode:i}=n,s=He(b,a)||Je(b,a),l=He(b,i)||Je(b,i);if(s&&l){var d=rt.toSlateRange(b,n,{exactMatch:!1,suppressThrow:!1});o.Transforms.select(b,d)}}}),100),[d]),A=(0,n.useMemo)((()=>l()(L,0)),[L]),W=(0,n.useCallback)((e=>{if(!d&&He(b,e.target)&&!$e(e,a)){var t;A.flush(),L.flush();var{selection:r}=b,{inputType:n}=e,i=e.dataTransfer||e.data||void 0;if("insertCompositionText"===n||"deleteCompositionText"===n)return;var s=!1;if("insertText"===n&&r&&o.Range.isCollapsed(r)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==r.anchor.offset){var l;s=!0,b.marks&&(s=!1);var{anchor:c}=r,[u,f]=rt.toDOMPoint(b,c),v=null===(l=u.parentElement)||void 0===l?void 0:l.closest("a");if(v&&rt.hasDOMNode(b,v)){var p,{document:h}=rt.getWindow(b),g=h.createTreeWalker(v,NodeFilter.SHOW_TEXT).lastChild();g===u&&(null===(p=g.textContent)||void 0===p?void 0:p.length)===f&&(s=!1)}}if(!n.startsWith("delete")||n.startsWith("deleteBy")){var[m]=e.getTargetRanges();if(m){var w=rt.toSlateRange(b,m,{exactMatch:!1,suppressThrow:!1});if(!r||!o.Range.equals(r,w)){s=!1;var E=b.selection&&o.Editor.rangeRef(b,b.selection);o.Transforms.select(b,w),E&&$.set(b,E)}}}if(s||e.preventDefault(),r&&o.Range.isExpanded(r)&&n.startsWith("delete")){var y=n.endsWith("Backward")?"backward":"forward";return void o.Editor.deleteFragment(b,{direction:y})}switch(n){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":o.Editor.deleteFragment(b);break;case"deleteContent":case"deleteContentForward":o.Editor.deleteForward(b);break;case"deleteContentBackward":o.Editor.deleteBackward(b);break;case"deleteEntireSoftLine":o.Editor.deleteBackward(b,{unit:"line"}),o.Editor.deleteForward(b,{unit:"line"});break;case"deleteHardLineBackward":o.Editor.deleteBackward(b,{unit:"block"});break;case"deleteSoftLineBackward":o.Editor.deleteBackward(b,{unit:"line"});break;case"deleteHardLineForward":o.Editor.deleteForward(b,{unit:"block"});break;case"deleteSoftLineForward":o.Editor.deleteForward(b,{unit:"line"});break;case"deleteWordBackward":o.Editor.deleteBackward(b,{unit:"word"});break;case"deleteWordForward":o.Editor.deleteForward(b,{unit:"word"});break;case"insertLineBreak":o.Editor.insertSoftBreak(b);break;case"insertParagraph":o.Editor.insertBreak(b);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":var{selection:C}=b;C&&o.Range.isExpanded(C)&&o.Editor.deleteFragment(b),"insertFromComposition"===n&&rt.isComposing(b)&&(x(!1),J.set(b,!1)),"DataTransfer"===(null===i||void 0===i?void 0:i.constructor.name)?rt.insertData(b,i):"string"===typeof i&&(s?B.current.push((()=>o.Editor.insertText(b,i))):o.Editor.insertText(b,i))}var k=null===(t=$.get(b))||void 0===t?void 0:t.unref();$.delete(b),!k||b.selection&&o.Range.equals(b.selection,k)||o.Transforms.select(b,k)}}),[d,a]);N((()=>(O.current&&F&&O.current.addEventListener("beforeinput",W),()=>{O.current&&F&&O.current.removeEventListener("beforeinput",W)})),[W]),N((()=>{var e=rt.getWindow(b);return e.document.addEventListener("selectionchange",A),()=>{e.document.removeEventListener("selectionchange",A)}}),[A]);var V=[...o.Node.nodes(b)].flatMap((e=>{var[t,n]=e;return r([t,n])}));if(s&&1===b.children.length&&1===Array.from(o.Node.texts(b)).length&&""===o.Node.string(b)&&!y){var q=o.Editor.start(b,[]);V.push({[G]:!0,placeholder:s,anchor:q,focus:q})}return n.createElement(ke.Provider,{value:d},n.createElement(Se.Provider,{value:r},n.createElement(g,Object.assign({role:d?void 0:"textbox"},w,{spellCheck:!(!F&&M)&&w.spellCheck,autoCorrect:F||!M?w.autoCorrect:"false",autoCapitalize:F||!M?w.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!d,zindex:-1,suppressContentEditableWarning:!0,ref:O,style:Ue({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},h),onBeforeInput:(0,n.useCallback)((e=>{if(!F&&!d&&!Xe(e,w.onBeforeInput)&&He(b,e.target)&&(e.preventDefault(),!rt.isComposing(b))){var t=e.data;o.Editor.insertText(b,t)}}),[d]),onInput:(0,n.useCallback)((e=>{for(var t of B.current)t();B.current=[]}),[]),onBlur:(0,n.useCallback)((e=>{if(!d&&!j.isUpdatingSelection&&He(b,e.target)&&!Xe(e,w.onBlur)){var t=rt.findDocumentOrShadowRoot(b);if(j.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(r!==rt.toDOMNode(b,b)&&(!Re(r)||!r.hasAttribute("data-slate-spacer"))){if(null!=r&&Te(r)&&rt.hasDOMNode(b,r)){var n=rt.toSlateNode(b,r);if(o.Element.isElement(n)&&!b.isVoid(n))return}if(k){var a=t.getSelection();null===a||void 0===a||a.removeAllRanges()}H.delete(b)}}}}),[d,w.onBlur]),onClick:(0,n.useCallback)((e=>{if(Ke(b,e.target)&&!Xe(e,w.onClick)&&Te(e.target)){var t=rt.toSlateNode(b,e.target),r=rt.findPath(b,t);if(!o.Editor.hasPath(b,r)||o.Node.get(b,r)!==t)return;if(3===e.detail&&r.length>=1){var n=r;if(!o.Editor.isBlock(b,t)){var a,i=o.Editor.above(b,{match:e=>o.Editor.isBlock(b,e),at:r});n=null!==(a=null===i||void 0===i?void 0:i[1])&&void 0!==a?a:r.slice(0,1)}var s=o.Editor.range(b,n);return void o.Transforms.select(b,s)}if(d)return;var l=o.Editor.start(b,r),c=o.Editor.end(b,r),u=o.Editor.void(b,{at:l}),f=o.Editor.void(b,{at:c});if(u&&f&&o.Path.equals(u[1],f[1])){var v=o.Editor.range(b,l);o.Transforms.select(b,v)}}}),[d,w.onClick]),onCompositionEnd:(0,n.useCallback)((e=>{if(He(b,e.target)&&!Xe(e,w.onCompositionEnd)&&(rt.isComposing(b)&&(x(!1),J.set(b,!1)),k||S||E||P||T||R||!e.data||o.Editor.insertText(b,e.data),b.selection&&o.Range.isCollapsed(b.selection))){var t=b.selection.anchor.path,r=o.Node.leaf(b,t);j.hasInsertPrefixInCompositon&&(j.hasInsertPrefixInCompositon=!1,o.Editor.withoutNormalizing(b,(()=>{var e=r.text.replace(/^\uFEFF/,"");o.Transforms.delete(b,{distance:r.text.length,reverse:!0}),o.Editor.insertText(b,e)})))}}),[w.onCompositionEnd]),onCompositionUpdate:(0,n.useCallback)((e=>{He(b,e.target)&&!Xe(e,w.onCompositionUpdate)&&(rt.isComposing(b)||(x(!0),J.set(b,!0)))}),[w.onCompositionUpdate]),onCompositionStart:(0,n.useCallback)((e=>{if(He(b,e.target)&&!Xe(e,w.onCompositionStart)){var{selection:t,marks:r}=b;if(t){if(o.Range.isExpanded(t))return void o.Editor.deleteFragment(b);var n=o.Editor.above(b,{match:e=>o.Editor.isInline(b,e),mode:"highest"});if(n){var[,a]=n;if(o.Editor.isEnd(b,t.anchor,a)){var i=o.Editor.after(b,a);o.Transforms.setSelection(b,{anchor:i,focus:i})}}r&&(j.hasInsertPrefixInCompositon=!0,o.Transforms.insertNodes(b,Ue({text:"\ufeff"},r),{select:!0}))}}}),[w.onCompositionStart]),onCopy:(0,n.useCallback)((e=>{He(b,e.target)&&!Xe(e,w.onCopy)&&(e.preventDefault(),rt.setFragmentData(b,e.clipboardData,"copy"))}),[w.onCopy]),onCut:(0,n.useCallback)((e=>{if(!d&&He(b,e.target)&&!Xe(e,w.onCut)){e.preventDefault(),rt.setFragmentData(b,e.clipboardData,"cut");var{selection:t}=b;if(t)if(o.Range.isExpanded(t))o.Editor.deleteFragment(b);else{var r=o.Node.parent(b,t.anchor.path);o.Editor.isVoid(b,r)&&o.Transforms.delete(b)}}}),[d,w.onCut]),onDragOver:(0,n.useCallback)((e=>{if(Ke(b,e.target)&&!Xe(e,w.onDragOver)){var t=rt.toSlateNode(b,e.target);o.Editor.isVoid(b,t)&&e.preventDefault()}}),[w.onDragOver]),onDragStart:(0,n.useCallback)((e=>{if(!d&&Ke(b,e.target)&&!Xe(e,w.onDragStart)){var t=rt.toSlateNode(b,e.target),r=rt.findPath(b,t);if(o.Editor.isVoid(b,t)||o.Editor.void(b,{at:r,voids:!0})){var n=o.Editor.range(b,r);o.Transforms.select(b,n)}j.isDraggingInternally=!0,rt.setFragmentData(b,e.dataTransfer,"drag")}}),[d,w.onDragStart]),onDrop:(0,n.useCallback)((e=>{if(!d&&Ke(b,e.target)&&!Xe(e,w.onDrop)){e.preventDefault();var t=b.selection,r=rt.findEventRange(b,e),n=e.dataTransfer;o.Transforms.select(b,r),j.isDraggingInternally&&(!t||o.Range.equals(t,r)||o.Editor.void(b,{at:r,voids:!0})||o.Transforms.delete(b,{at:t})),rt.insertData(b,n),rt.isFocused(b)||rt.focus(b)}j.isDraggingInternally=!1}),[d,w.onDrop]),onDragEnd:(0,n.useCallback)((e=>{!d&&j.isDraggingInternally&&w.onDragEnd&&Ke(b,e.target)&&w.onDragEnd(e),j.isDraggingInternally=!1}),[d,w.onDragEnd]),onFocus:(0,n.useCallback)((e=>{if(!d&&!j.isUpdatingSelection&&He(b,e.target)&&!Xe(e,w.onFocus)){var t=rt.toDOMNode(b,b),r=rt.findDocumentOrShadowRoot(b);if(j.latestElement=r.activeElement,C&&e.target!==t)return void t.focus();H.set(b,!0)}}),[d,w.onFocus]),onKeyDown:(0,n.useCallback)((e=>{if(!d&&He(b,e.target)){var{nativeEvent:t}=e;if(rt.isComposing(b)&&!1===t.isComposing&&(J.set(b,!1),x(!1)),Xe(e,w.onKeyDown)||rt.isComposing(b))return;var{selection:r}=b,n=b.children[null!==r?r.focus.path[0]:0],a="rtl"===i()(o.Node.string(n));if(Ce.isRedo(t)){e.preventDefault();var s=b;return void("function"===typeof s.redo&&s.redo())}if(Ce.isUndo(t)){e.preventDefault();var l=b;return void("function"===typeof l.undo&&l.undo())}if(Ce.isMoveLineBackward(t))return e.preventDefault(),void o.Transforms.move(b,{unit:"line",reverse:!0});if(Ce.isMoveLineForward(t))return e.preventDefault(),void o.Transforms.move(b,{unit:"line"});if(Ce.isExtendLineBackward(t))return e.preventDefault(),void o.Transforms.move(b,{unit:"line",edge:"focus",reverse:!0});if(Ce.isExtendLineForward(t))return e.preventDefault(),void o.Transforms.move(b,{unit:"line",edge:"focus"});if(Ce.isMoveBackward(t))return e.preventDefault(),void(r&&o.Range.isCollapsed(r)?o.Transforms.move(b,{reverse:!a}):o.Transforms.collapse(b,{edge:"start"}));if(Ce.isMoveForward(t))return e.preventDefault(),void(r&&o.Range.isCollapsed(r)?o.Transforms.move(b,{reverse:a}):o.Transforms.collapse(b,{edge:"end"}));if(Ce.isMoveWordBackward(t))return e.preventDefault(),r&&o.Range.isExpanded(r)&&o.Transforms.collapse(b,{edge:"focus"}),void o.Transforms.move(b,{unit:"word",reverse:!a});if(Ce.isMoveWordForward(t))return e.preventDefault(),r&&o.Range.isExpanded(r)&&o.Transforms.collapse(b,{edge:"focus"}),void o.Transforms.move(b,{unit:"word",reverse:a});if(F){if((D||k)&&r&&(Ce.isDeleteBackward(t)||Ce.isDeleteForward(t))&&o.Range.isCollapsed(r)){var c=o.Node.parent(b,r.anchor.path);if(o.Element.isElement(c)&&o.Editor.isVoid(b,c)&&o.Editor.isInline(b,c))return e.preventDefault(),void o.Editor.deleteBackward(b,{unit:"block"})}}else{if(Ce.isBold(t)||Ce.isItalic(t)||Ce.isTransposeCharacter(t))return void e.preventDefault();if(Ce.isSoftBreak(t))return e.preventDefault(),void o.Editor.insertSoftBreak(b);if(Ce.isSplitBlock(t))return e.preventDefault(),void o.Editor.insertBreak(b);if(Ce.isDeleteBackward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(b,{direction:"backward"}):o.Editor.deleteBackward(b));if(Ce.isDeleteForward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(b,{direction:"forward"}):o.Editor.deleteForward(b));if(Ce.isDeleteLineBackward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(b,{direction:"backward"}):o.Editor.deleteBackward(b,{unit:"line"}));if(Ce.isDeleteLineForward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(b,{direction:"forward"}):o.Editor.deleteForward(b,{unit:"line"}));if(Ce.isDeleteWordBackward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(b,{direction:"backward"}):o.Editor.deleteBackward(b,{unit:"word"}));if(Ce.isDeleteWordForward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(b,{direction:"forward"}):o.Editor.deleteForward(b,{unit:"word"}))}}}),[d,w.onKeyDown]),onPaste:(0,n.useCallback)((e=>{d||!He(b,e.target)||Xe(e,w.onPaste)||F&&!(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||(e.preventDefault(),rt.insertData(b,e.clipboardData))}),[d,w.onPaste])}),n.createElement(ze,{decorations:V,node:b,renderElement:u,renderPlaceholder:v,renderLeaf:f,selection:b.selection}))))}},13735:function(e,t,r){"use strict";function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function o(e){var t,r;return!1!==n(e)&&(void 0===(t=e.constructor)||!1!==n(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}r.d(t,{P:function(){return o}})}}]);