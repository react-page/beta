(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4709],{78859:function(t,e,s){var i=s(71928),n=s(76747),r=s(42383),o=s(11611),a=s(37948);t.exports=function(t,e,s,l){if(!o(t))return t;e=n(e,t);for(var d=-1,h=e.length,u=h-1,p=t;null!=p&&++d<h;){var m=a(e[d]),g=s;if("__proto__"===m||"constructor"===m||"prototype"===m)break;if(d!=u){var c=p[m];void 0===(g=l?l(c,m,p):void 0)&&(g=o(c)?c:r(e[d+1])?[]:{})}i(p,m,g),p=p[m]}return t}},13784:function(t,e,s){var i=s(40699);t.exports=function(t){return i(t,4)}},56141:function(t,e,s){var i=s(32866);t.exports=function(t,e){return i(t,e)}},96498:function(t,e,s){var i=s(78859);t.exports=function(t,e,s,n){return n="function"==typeof n?n:void 0,null==t?t:i(t,e,s,n)}},14709:function(t,e,s){"use strict";s.d(e,{N:function(){return P}});var i=s(13784),n=s.n(i),r=s(56141),o=s.n(r),a=s(48159),l=s.n(a),d=s(96498),h=s.n(d),u=s(99729),p=s.n(u),m=s(27378),g=s(64576);function c(t){return!!t&&t===Object(t)&&!(t instanceof Date)}var b=s(73456);function v(t){let e=0;return()=>`${t}-${("000"+(e++).toString(36)).slice(-4)}`}let f=v("uniforms");class C extends m.Component{constructor(t){super(t),this.state={changed:!1,changedMap:Object.create(null),resetCount:0,submitted:!1,submitting:!1},this.mounted=!1,this.randomId=function(t=f()){return v(t)}(this.props.id),this.onReset=this.reset=this.onReset.bind(this),this.onChange=this.change=this.onChange.bind(this),this.onSubmit=this.submit=this.onSubmit.bind(this);let e=this.getModel.bind(this);this.getModel=(t,s=e(t))=>void 0!==t&&this.props.modelTransform?this.props.modelTransform(t,s):s}componentDidMount(){this.mounted=!0}componentDidUpdate(t,e,s){}componentWillUnmount(){this.mounted=!1,this.delayId&&clearTimeout(this.delayId),this.setState=()=>{}}getContext(){return{changed:this.state.changed,changedMap:this.state.changedMap,error:this.getContextError(),formRef:this,model:this.getContextModel(),name:this.getContextName(),onChange:this.getContextOnChange(),onSubmit:this.getContextOnSubmit(),randomId:this.randomId,schema:this.getContextSchema(),state:this.getContextState(),submitted:this.state.submitted,submitting:this.state.submitting,validating:!1}}getContextName(){return[]}getContextError(){return this.props.error}getContextModel(){return this.getModel("form")}getContextState(){return{disabled:!!this.props.disabled,label:!!this.props.label,placeholder:!!this.props.placeholder,readOnly:!!this.props.readOnly,showInlineError:!!this.props.showInlineError}}getContextSchema(){return this.props.schema}getContextOnChange(){return this.onChange}getContextOnSubmit(){return this.onSubmit}getModel(t,e=this.props.model){return e}getNativeFormProps(){let t=l()(this.props,["autosave","autosaveDelay","disabled","error","label","model","modelTransform","onChange","onSubmit","placeholder","readOnly","schema","showInlineError"]);return Object.assign(Object.assign({},t),{onSubmit:this.onSubmit,key:`reset-${this.state.resetCount}`})}onChange(t,e){if(this.mounted){let s=function(t,e,s){if(!c(e)||s&&typeof e!=typeof s)return o()(e,s)?[]:[t];let i=[t];if(c(s)){for(let n in e)n in s&&o()(e[n],s[n])||i.push((0,g.m)(t,n));for(let r in s)r in e||i.push((0,g.m)(t,r));1===i.length&&i.pop()}else for(let a in e)i.push((0,g.m)(t,a));return i}(t,e,p()(this.getModel(),t));0!==s.length&&this.setState(t=>t.changed&&s.every(e=>!!p()(t.changedMap,e))?null:{changed:!0,changedMap:s.reduce((t,e)=>h()(t,e,{},n()),n()(t.changedMap))})}this.props.onChange&&this.props.onChange(t,e),this.mounted&&this.props.autosave&&(this.delayId&&(this.delayId=clearTimeout(this.delayId)),this.delayId=setTimeout(()=>{this.setState(()=>null,()=>{this.onSubmit()})},this.props.autosaveDelay))}__reset(t){return{changed:!1,changedMap:Object.create(null),resetCount:t.resetCount+1,submitted:!1,submitting:!1}}onReset(){this.setState(this.__reset)}onSubmit(t){t&&(t.preventDefault(),t.stopPropagation()),this.setState(t=>t.submitted?null:{submitted:!0});let e=this.props.onSubmit(this.getModel("submit"));return e instanceof Promise?(this.setState({submitting:!0}),e.finally(()=>{this.setState({submitting:!1})})):Promise.resolve()}render(){return m.createElement(b.D.Provider,{value:this.getContext()},m.createElement("form",Object.assign({},this.getNativeFormProps())))}}C.displayName="Form",C.defaultProps={autosave:!1,autosaveDelay:0,error:null,label:!0,model:Object.create(null),noValidate:!0,onSubmit(){}};var S=s(59312);function x(t){class e extends t{getNativeFormProps(){let t=super.getNativeFormProps(),{autoField:e=this.getAutoField(),errorsField:s=this.getErrorsField(),submitField:i=this.getSubmitField()}=t,n=(0,S._T)(t,["autoField","errorsField","submitField"]);return n.children||(n.children=this.getContextSchema().getSubfields().map(t=>m.createElement(e,{key:t,name:t})).concat([m.createElement(s,{key:"$ErrorsField"}),m.createElement(i,{key:"$SubmitField"})])),n}getAutoField(){return()=>null}getErrorsField(){return()=>null}getSubmitField(){return()=>null}}return e.Quick=x,e.displayName=`Quick${t.displayName}`,e}x(C);var y=s(30454),M=s.n(y),O=s(50344),F=s.n(O);function _(t){class e extends t{constructor(t){super(t),this.state=Object.assign(Object.assign({},this.state),{error:null,validate:!1,validating:!1,validator:this.getContextSchema().getValidator(t.validator)}),this.onValidate=this.validate=this.onValidate.bind(this),this.onValidateModel=this.validateModel=this.onValidateModel.bind(this)}getContextError(){var t;return null!==(t=super.getContextError())&&void 0!==t?t:this.state.error}getContext(){return Object.assign(Object.assign({},super.getContext()),{validating:this.state.validating})}getNativeFormProps(){let t=super.getNativeFormProps();return l()(t,["onValidate","validate","validator"])}componentDidUpdate(t,e,s){super.componentDidUpdate(t,e,s);let{model:i,schema:n,validate:r,validator:a}=this.props;n!==t.schema||a!==t.validator?this.setState({validator:n.getValidator(a)},()=>{j(r,this.state.validate)&&this.onValidate()}):!o()(i,t.model)&&j(r,this.state.validate)&&this.onValidateModel(i)}onChange(t,e){j(this.props.validate,this.state.validate)&&this.onValidate(t,e),super.onChange(t,e)}__reset(t){return Object.assign(Object.assign({},super.__reset(t)),{error:null,validate:!1,validating:!1})}onSubmit(t){t&&(t.preventDefault(),t.stopPropagation()),this.setState({submitted:!0,validate:!0});let e=this.onValidate().then(t=>null!==t?Promise.reject(t):super.onSubmit().catch(t=>{throw this.setState({error:t}),t}));return e.catch(F()),e}onValidate(t,e){let s=this.getContextModel();return s&&t&&(s=h()(n()(s),t,M()(e),n())),this.onValidateModel(s)}onValidateModel(t){var e;let s=this.getModel("validate",t),i=(e=()=>{this.setState({validating:!0})},function(t,s){return t instanceof Promise?(e(),t.then(s)):s(t)});return i(this.state.validator(s),(t=null)=>i(this.props.onValidate(s,t),(t=null)=>{var e;return t=this.props.error===t?null:t,this.setState(e=>e.error!==t||e.validating?{error:t,validating:!1}:null),Promise.resolve(null!==(e=this.props.error)&&void 0!==e?e:t)}))}}return e.Validated=_,e.displayName=`Validated${t.displayName}`,e.defaultProps=Object.assign(Object.assign({},t.defaultProps),{onValidate:(t,e)=>e,validate:"onChangeAfterSubmit"}),e}function j(t,e){return"onChange"===t||"onChangeAfterSubmit"===t&&e}_(C);let N=_(x(C)),P=function t(e){class s extends e{constructor(t){super(t),this.state=Object.assign(Object.assign({},this.state),{model:t.model})}componentDidUpdate(t,e,s){let{model:i}=this.props;o()(i,t.model)||this.setState({model:i}),super.componentDidUpdate(t,e,s)}getNativeFormProps(){let t=super.getNativeFormProps();return l()(t,["onChangeModel"])}getModel(t){return this.state.model}onChange(t,e){super.onChange(t,e),this.setState(s=>({model:h()(n()(s.model),t,e,n())}),()=>{this.props.onChangeModel&&this.props.onChangeModel(this.state.model)})}__reset(t){return Object.assign(Object.assign({},super.__reset(t)),{model:this.props.model})}}return s.Auto=t,s.displayName=`Auto${e.displayName}`,s}(N)}}]);
//# sourceMappingURL=4709.d734dafb28904d04.js.map