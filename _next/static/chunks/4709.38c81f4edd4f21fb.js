(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4709],{78859:function(t,e,n){var s=n(71928),i=n(76747),o=n(42383),r=n(11611),a=n(37948);t.exports=function(t,e,n,l){if(!r(t))return t;for(var d=-1,h=(e=i(e,t)).length,u=h-1,p=t;null!=p&&++d<h;){var c=a(e[d]),m=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(d!=u){var g=p[c];void 0===(m=l?l(g,c,p):void 0)&&(m=r(g)?g:o(e[d+1])?[]:{})}s(p,c,m),p=p[c]}return t}},13784:function(t,e,n){var s=n(40699);t.exports=function(t){return s(t,4)}},56141:function(t,e,n){var s=n(32866);t.exports=function(t,e){return s(t,e)}},96498:function(t,e,n){var s=n(78859);t.exports=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:s(t,e,n,i)}},14709:function(t,e,n){"use strict";n.d(e,{N:function(){return N}});var s=n(13784),i=n.n(s),o=n(56141),r=n.n(o),a=n(48159),l=n.n(a),d=n(96498),h=n.n(d),u=n(99729),p=n.n(u),c=n(27378),m=n(64576);function g(t){return!!t&&t===Object(t)&&!(t instanceof Date)}var b=n(73456);function v(t){let e=0;return()=>`${t}-${("000"+(e++).toString(36)).slice(-4)}`}const f=v("uniforms");class C extends c.Component{constructor(t){super(t),this.state={changed:!1,changedMap:Object.create(null),resetCount:0,submitted:!1,submitting:!1},this.mounted=!1,this.randomId=function(t=f()){return v(t)}(this.props.id),this.onReset=this.reset=this.onReset.bind(this),this.onChange=this.change=this.onChange.bind(this),this.onSubmit=this.submit=this.onSubmit.bind(this);const e=this.getModel.bind(this);this.getModel=(t,n=e(t))=>void 0!==t&&this.props.modelTransform?this.props.modelTransform(t,n):n}componentDidMount(){this.mounted=!0}componentDidUpdate(t,e,n){}componentWillUnmount(){this.mounted=!1,this.delayId&&clearTimeout(this.delayId)}getContext(){return{changed:this.state.changed,changedMap:this.state.changedMap,error:this.getContextError(),formRef:this,model:this.getContextModel(),name:this.getContextName(),onChange:this.getContextOnChange(),onSubmit:this.getContextOnSubmit(),randomId:this.randomId,schema:this.getContextSchema(),state:this.getContextState(),submitted:this.state.submitted,submitting:this.state.submitting,validating:!1}}getContextName(){return[]}getContextError(){return this.props.error}getContextModel(){return this.getModel("form")}getContextState(){return{disabled:!!this.props.disabled,label:!!this.props.label,placeholder:!!this.props.placeholder,readOnly:!!this.props.readOnly,showInlineError:!!this.props.showInlineError}}getContextSchema(){return this.props.schema}getContextOnChange(){return this.onChange}getContextOnSubmit(){return this.onSubmit}getModel(t,e=this.props.model){return e}getNativeFormProps(){const t=l()(this.props,["autosave","autosaveDelay","disabled","error","label","model","modelTransform","onChange","onSubmit","placeholder","readOnly","schema","showInlineError"]);return Object.assign(Object.assign({},t),{onSubmit:this.onSubmit,key:`reset-${this.state.resetCount}`})}onChange(t,e){if(this.mounted){const n=function(t,e,n){if(!g(e)||n&&typeof e!==typeof n)return r()(e,n)?[]:[t];const s=[t];if(g(n)){for(const i in e)i in n&&r()(e[i],n[i])||s.push((0,m.m)(t,i));for(const i in n)i in e||s.push((0,m.m)(t,i));1===s.length&&s.pop()}else for(const i in e)s.push((0,m.m)(t,i));return s}(t,e,p()(this.getModel(),t));0!==n.length&&this.setState((t=>t.changed&&n.every((e=>!!p()(t.changedMap,e)))?null:{changed:!0,changedMap:n.reduce(((t,e)=>h()(t,e,{},i())),i()(t.changedMap))}))}this.props.onChange&&this.props.onChange(t,e),this.mounted&&this.props.autosave&&(this.delayId&&(this.delayId=clearTimeout(this.delayId)),this.delayId=setTimeout((()=>{this.setState((()=>null),(()=>{this.onSubmit()}))}),this.props.autosaveDelay))}__reset(t){return{changed:!1,changedMap:Object.create(null),resetCount:t.resetCount+1,submitted:!1,submitting:!1}}onReset(){this.setState(this.__reset)}onSubmit(t){t&&(t.preventDefault(),t.stopPropagation()),this.setState((t=>t.submitted?null:{submitted:!0}));const e=this.props.onSubmit(this.getModel("submit"));return e instanceof Promise?(this.setState({submitting:!0}),e.finally((()=>{this.setState({submitting:!1})}))):Promise.resolve()}render(){return c.createElement(b.D.Provider,{value:this.getContext()},c.createElement("form",Object.assign({},this.getNativeFormProps())))}}C.displayName="Form",C.defaultProps={autosave:!1,autosaveDelay:0,error:null,label:!0,model:Object.create(null),noValidate:!0,onSubmit(){}};var S=n(59312);function x(t){class e extends t{getNativeFormProps(){const t=super.getNativeFormProps(),{autoField:e=this.getAutoField(),errorsField:n=this.getErrorsField(),submitField:s=this.getSubmitField()}=t,i=(0,S._T)(t,["autoField","errorsField","submitField"]);return i.children||(i.children=this.getContextSchema().getSubfields().map((t=>c.createElement(e,{key:t,name:t}))).concat([c.createElement(n,{key:"$ErrorsField"}),c.createElement(s,{key:"$SubmitField"})])),i}getAutoField(){return()=>null}getErrorsField(){return()=>null}getSubmitField(){return()=>null}}return e.Quick=x,e.displayName=`Quick${t.displayName}`,e}x(C);var y=n(30454),M=n.n(y),O=n(50344),F=n.n(O);function _(t){class e extends t{constructor(t){super(t),this.state=Object.assign(Object.assign({},this.state),{error:null,validate:!1,validating:!1,validator:this.getContextSchema().getValidator(t.validator)}),this.onValidate=this.validate=this.onValidate.bind(this),this.onValidateModel=this.validateModel=this.onValidateModel.bind(this)}getContextError(){var t;return null!==(t=super.getContextError())&&void 0!==t?t:this.state.error}getContext(){return Object.assign(Object.assign({},super.getContext()),{validating:this.state.validating})}getNativeFormProps(){const t=super.getNativeFormProps();return l()(t,["onValidate","validate","validator"])}componentDidUpdate(t,e,n){super.componentDidUpdate(t,e,n);const{model:s,schema:i,validate:o,validator:a}=this.props;i!==t.schema||a!==t.validator?this.setState({validator:i.getValidator(a)},(()=>{j(o,this.state.validate)&&this.onValidate()})):!r()(s,t.model)&&j(o,this.state.validate)&&this.onValidateModel(s)}onChange(t,e){j(this.props.validate,this.state.validate)&&this.onValidate(t,e),super.onChange(t,e)}__reset(t){return Object.assign(Object.assign({},super.__reset(t)),{error:null,validate:!1,validating:!1})}onSubmit(t){t&&(t.preventDefault(),t.stopPropagation()),this.setState({submitted:!0,validate:!0});const e=this.onValidate().then((t=>null!==t?Promise.reject(t):super.onSubmit().catch((t=>{throw this.setState({error:t}),t}))));return e.catch(F()),e}onValidate(t,e){let n=this.getContextModel();return n&&t&&(n=h()(i()(n),t,M()(e),i())),this.onValidateModel(n)}onValidateModel(t){const e=this.getModel("validate",t),n=function(t){function e(e,n){return e instanceof Promise?(t(),e.then(n)):n(e)}return e}((()=>{this.setState({validating:!0})}));return n(this.state.validator(e),((t=null)=>n(this.props.onValidate(e,t),((t=null)=>{var e;return t=this.props.error===t?null:t,this.setState((e=>e.error!==t||e.validating?{error:t,validating:!1}:null)),Promise.resolve(null!==(e=this.props.error)&&void 0!==e?e:t)}))))}}return e.Validated=_,e.displayName=`Validated${t.displayName}`,e.defaultProps=Object.assign(Object.assign({},t.defaultProps),{onValidate:(t,e)=>e,validate:"onChangeAfterSubmit"}),e}function j(t,e){return"onChange"===t||"onChangeAfterSubmit"===t&&e}_(C);const N=function t(e){class n extends e{constructor(t){super(t),this.state=Object.assign(Object.assign({},this.state),{model:t.model})}componentDidUpdate(t,e,n){const{model:s}=this.props;r()(s,t.model)||this.setState({model:s}),super.componentDidUpdate(t,e,n)}getNativeFormProps(){const t=super.getNativeFormProps();return l()(t,["onChangeModel"])}getModel(t){return this.state.model}onChange(t,e){super.onChange(t,e),this.setState((n=>({model:h()(i()(n.model),t,e,i())})),(()=>{this.props.onChangeModel&&this.props.onChangeModel(this.state.model)}))}__reset(t){return Object.assign(Object.assign({},super.__reset(t)),{model:this.props.model})}}return n.Auto=t,n.displayName=`Auto${e.displayName}`,n}(_(x(C)))}}]);